# AI-Powered Content Builder System

## âš ï¸ CRITICAL: START HERE - WEB ANALYSIS CHECKLIST

**BEFORE starting ANY web analysis, complete these steps IN ORDER:**

### âœ… **Step-by-Step Execution (DO NOT SKIP ANY STEP)**

1. **Get Browser Tab** â† START HERE
   ```javascript
   const tabs = await mcp_kapture_list_tabs();
   const tabId = tabs[0].id;
   ```

2. **Navigate to URL**
   ```javascript
   await mcp_kapture_navigate({ tabId, url: "https://example.com" });
   ```

3. **Initial DOM Capture**
   ```javascript
   await mcp_kapture_dom({ tabId });
   await mcp_kapture_elements({ tabId, visible: "true" });
   ```

4. **Initial Screenshot** (analyze immediately, do NOT save to file)
   ```javascript
   await mcp_kapture_screenshot({ tabId });
   // Analyze colors, layout, typography in conversation
   ```

5. **Progressive Scroll** (MANDATORY - Capture entire page)
   - Use `mcp_kapture_keypress()` with ArrowDown ONLY for controlled 5% scrolling
   - **Goal:** Capture EVERY visible change from top to bottom
   - **Minimum checkpoints:** 20+ screenshots covering entire page
   - At EACH scroll position:
     - Take screenshot
     - Analyze changes vs previous position
     - Test visible interactions
     - Log findings
     - Move to next position

6. **Test All Interactions**
   - Hover effects on buttons/cards
   - Click navigation links
   - Open modals/accordions
   - Test forms (UI only, no submission)

7. **Multi-Viewport Analysis**
   - Repeat steps 3-6 for Mobile (375x812)
   - Repeat steps 3-6 for Tablet (768x1024)
   - Repeat steps 3-6 for Desktop (1440x900)

8. **Generate Output**
   - Write to `analysis/web-pipeline/01_contents_web.json`
   - Write to `analysis/web-pipeline/02_style_web.json`
   - Write to `analysis/web-pipeline/03_integrate_web.json`
   - Generate code to `output/web/index.html`

---

## Overview

This system analyzes websites, designs, and user requirements to generate production-ready specifications and code. **The key principle: determine output type (Web or Presentation) from the start**, as each requires fundamentally different analysis approaches.

---

## âš ï¸ CRITICAL: Core Analysis Policies

### 1. MCP Tool Policy (Mandatory)

**âš ï¸ BEFORE CALLING ANY TOOL - VERIFY IT STARTS WITH `mcp_kapture_`**

**YOU MUST USE KAPTURE MCP TOOLS EXCLUSIVELY:**
- âœ… **ALLOWED:** `mcp_kapture_*` tools ONLY
  - `mcp_kapture_list_tabs()` â† Get browser tabs
  - `mcp_kapture_navigate()` â† Navigate to URL
  - `mcp_kapture_dom()` â† Get DOM structure
  - `mcp_kapture_elements()` â† Get interactive elements
  - `mcp_kapture_screenshot()` â† Take screenshot
  - `mcp_kapture_hover()` â† Test hover effects
  - `mcp_kapture_click()` â† Click elements
  - `mcp_kapture_keypress()` â† Send keyboard input (for scrolling)
  - `mcp_kapture_resize()` â† Change viewport size

- âŒ **FORBIDDEN:** All other MCP tools
  - `mcp_microsoft_pla_*` (Microsoft Playwright MCP)
  - `mcp_browsermcp_*` (Generic Browser MCP)
  - Any tool not starting with `mcp_kapture_`

- âš ï¸ **NOT AVAILABLE:** JavaScript execution
  - `mcp_kapture_evaluate()` does NOT exist
  - Use `mcp_kapture_keypress()` with ArrowDown for scrolling (see Phase 2)

**Why Kapture Only?**
- Direct DOM access via `mcp_kapture_dom` and `mcp_kapture_elements`
- Real-time state comparison
- Consistent tool behavior
- Simpler mental model for AI

**âš ï¸ If you're about to call a tool that does NOT start with `mcp_kapture_`, STOP and use the Kapture equivalent instead.**

---

### 2. Screenshot Policy (Memory-Based Analysis)

**âš ï¸ DO NOT SAVE SCREENSHOTS TO FILES**

**Process:**
1. âœ… Take screenshot via `mcp_kapture_screenshot()`
2. âœ… Analyze the returned base64 image immediately
3. âœ… Extract visual information (colors, layout, spacing)
4. âœ… Move to next screenshot
5. âŒ **DO NOT** save to `output/captures/`

**Comparison Strategy:**
- Screenshots exist in **conversation history**
- AI can reference previous messages: "Compare this screenshot with the one from Step 3"
- Conversation context preserves recent base64 data
- âš ï¸ Avoid excessive accumulation (413 error risk)

**When to Use Screenshots:**
- Visual design analysis (colors, fonts, spacing)
- Layout verification across viewports
- Interaction state comparison (hover before/after)

**Example Workflow:**
```javascript
// Step 1: Initial state
const screen1 = await mcp_kapture_screenshot({ tabId });
// AI analyzes: "Blue header, white background, 3-column grid"

// Step 2: After hover
await mcp_kapture_hover({ tabId, selector: ".card" });
const screen2 = await mcp_kapture_screenshot({ tabId });
// AI compares: "Card now has shadow, background changed from white to gray"
// No file saving needed!
```

---

### 3. Analysis File Structure

**`analysis/` folder is for OUTPUT, not input templates:**

```
analysis/
â”œâ”€â”€ web-pipeline/
â”‚   â”œâ”€â”€ 01_contents_web.json    â† AI writes analysis results here
â”‚   â”œâ”€â”€ 02_style_web.json       â† AI writes design tokens here
â”‚   â”œâ”€â”€ 03_integrate_web.json   â† AI writes integrated spec here
â”‚   â””â”€â”€ generators/
â”‚       â””â”€â”€ 04_generate_tailwind.json  â† Code generation logic
â””â”€â”€ presentation-pipeline/
    â””â”€â”€ (similar structure)
```

**These files are NOT templates to read from.**
**These are destination files to write analysis results to.**

**Workflow:**
1. User provides URL
2. AI explores with Kapture MCP
3. AI **writes** results to `analysis/web-pipeline/01_contents_web.json`
4. AI **writes** design tokens to `analysis/web-pipeline/02_style_web.json`
5. AI **reads both** and **writes** to `analysis/web-pipeline/03_integrate_web.json`
6. AI **reads** `03_integrate_web.json` and generates code

---

### 4. Output File Locations (Confirmed)

**Final outputs go to `output/` root:**
```
output/
â”œâ”€â”€ web_contents.json          â† Copy of analysis/web-pipeline/01_*.json
â”œâ”€â”€ web_style.json             â† Copy of analysis/web-pipeline/02_*.json
â”œâ”€â”€ WebDevSpec.json            â† Copy of analysis/web-pipeline/03_*.json
â””â”€â”€ web/
    â””â”€â”€ index.html             â† Final generated code
```

**Why copy to output/?**
- Users expect results in `output/`
- `analysis/` is internal system folder
- Clear separation of concerns

---

## REQUIRED WORKFLOW FOR EVERY WEB ANALYSIS

### Step 1: Get Browser Tab (Use Kapture MCP)

```javascript
// âœ… CORRECT: Use Kapture MCP
const tabs = await mcp_kapture_list_tabs();
const tabId = tabs[0].id;
```

### Step 2: Manual Exploration Process

**User-Guided Exploration (No Automation Scripts):**

User will guide you through each step. Follow their instructions explicitly.

**Standard Exploration Flow:**

#### Phase 1: Initial Load
1. Navigate to URL
2. Get full page DOM (`mcp_kapture_dom`)
3. Get all interactive elements (`mcp_kapture_elements`)
4. Take screenshot for visual reference
5. Analyze in conversation context

# Phase 2: Progressive 5% Scroll Analysis (Updated)

## âš ï¸ CRITICAL: EXACT 5% INCREMENTS ONLY - NO EXCEPTIONS

**Absolute Rule: Every page MUST be scrolled in precise 5% increments (0% â†’ 5% â†’ 10% â†’ ... â†’ 100%)**

---

## Step 0: Calibration (Initial Setup)

```javascript
// âš ï¸ IMPORTANT: Kapture MCP does NOT support evaluate()
// Therefore, use ArrowDown keypress with calibration

// Method: Count total ArrowDown presses needed to reach bottom
// 1. Press ArrowDown repeatedly until footer visible
// 2. Count total presses (example: 120 presses)
// 3. Divide by 20 to get presses per checkpoint

const totalPresses = 120; // Example value (calibrate per page)
const pressesPerCheckpoint = totalPresses / 20; // 6 presses per 5%
```

**Why This Works:**
- ArrowDown scrolls ~40px per press (browser dependent)
- Consistent increments ensure even distribution
- 21 checkpoints Ã— 6 presses = 126 total presses
- Covers 0% â†’ 100% systematically

---

## Process for EACH 5% Checkpoint (21 Total)

### 1. **ğŸ“ Scroll to Position**

```javascript
// Execute exact number of ArrowDown presses
for (let i = 0; i < pressesPerCheckpoint; i++) {
  await mcp_kapture_keypress({ tabId, key: "ArrowDown" });
  await new Promise(resolve => setTimeout(resolve, 50)); // Brief pause
}

// Wait for animations to complete
await new Promise(resolve => setTimeout(resolve, 300));
```

**Result:** Page scrolls down by approximately 5% (one checkpoint)

---

### 2. **ğŸ“¸ Screenshot Capture**

```javascript
const screenshot = await mcp_kapture_screenshot({ tabId });
// Screenshot stored in conversation memory
```

**Log:** "Checkpoint 3/21 at estimated 15%"

---

### 3. **ğŸ” Immediate Analysis** (MANDATORY)

Analyze EVERY aspect of current viewport:

#### Visual Analysis:
- Colors visible (hex codes, gradients)
- Typography (fonts, sizes, weights)
- Spacing (margins, padding, gaps)
- Design tokens (shadows, borders, border-radius)

#### Animation Detection:
- Fade-in/out effects
- Slide-in (left/right/up/down)
- Zoom/scale animations
- Parallax movements
- Scroll-triggered CSS classes

#### Element Visibility:
- New elements entering viewport
- Elements that left viewport
- Partially visible elements

#### State Changes:
- Header: transparent â†’ solid background
- Sticky elements: position changes
- Progress bars: width updates
- Counters: number animations

---

### 4. **ğŸ”„ Comparison with Previous**

```javascript
// AI compares current screenshot with previous checkpoint
```

**Document Changes:**
- Element positions (e.g., ".hero-bg translateY changed by 20px")
- Opacity transitions (e.g., ".card opacity 0 â†’ 1")
- Transform changes (e.g., "scale(0.9) â†’ scale(1)")
- Color/size adjustments

**Create Change Log:**
```json
{
  "from": "checkpoint-2",
  "to": "checkpoint-3",
  "changes": [
    {
      "element": ".parallax-bg",
      "property": "transform",
      "before": "translateY(0px)",
      "after": "translateY(-30px)"
    },
    {
      "element": ".fade-card",
      "property": "opacity",
      "before": "0",
      "after": "1",
      "animation": "fade-in 300ms ease-out"
    }
  ]
}
```

---

### 5. **ğŸ–±ï¸ Interaction Testing**

Test ONLY elements visible in current viewport:

#### Hover Effects:
```javascript
await mcp_kapture_hover({ tabId, selector: ".visible-card" });
// Capture: scale, shadow, color changes
```

#### Click Interactions:
```javascript
await mcp_kapture_click({ tabId, selector: ".button" });
// Document: modal open, section expand, route change
```

#### Form Fields:
```javascript
await mcp_kapture_click({ tabId, selector: "input[name='email']" });
// Test: focus states, validation UI
// âš ï¸ NO actual submissions
```

#### DOM Comparison:
```javascript
const dom = await mcp_kapture_dom({ tabId });
const elements = await mcp_kapture_elements({ tabId, visible: "true" });
```

---

### 6. **ğŸ“ Logging** (MANDATORY)

```json
{
  "checkpoint": "3/21",
  "estimatedPosition": "15%",
  "arrowDownCount": 18,
  "timestamp": "2025-11-10T14:30:15Z",
  "visualChanges": [
    "Header background changed to solid white",
    "Card fade-in animation triggered",
    "Parallax background moved 30px"
  ],
  "animations": [
    {
      "type": "fade-in",
      "element": ".feature-card",
      "duration": "300ms",
      "easing": "ease-out"
    }
  ],
  "interactions": [
    {
      "type": "hover",
      "element": ".cta-button",
      "effect": "scale(1.05), shadow-large"
    }
  ],
  "comparison": "vs checkpoint-2: New card visible, header state changed"
}
```

---

### 7. **â¡ï¸ Next Checkpoint**

**ONLY proceed after steps 1-6 are complete:**
1. Increment checkpoint counter
2. Return to Step 1
3. Continue until checkpoint 21/21

---

## Target Coverage

**Exactly 21 checkpoints:**
- 0%, 5%, 10%, 15%, 20%, 25%, 30%, 35%, 40%, 45%, 50%
- 55%, 60%, 65%, 70%, 75%, 80%, 85%, 90%, 95%, 100%

---

## Completion Criteria

- âœ… All 21 checkpoints completed
- âœ… Every animation detected and documented
- âœ… All interactive elements tested at multiple positions
- âœ… Complete comparison log for each checkpoint
- âœ… **Bottom verification:** Footer visible, no further scroll possible

---

## âŒ FORBIDDEN METHODS

```javascript

// âŒ NEVER USE End - Jumps directly to bottom
await mcp_kapture_keypress({ tabId, key: "End" });

// âŒ NEVER USE evaluate - Not available in Kapture MCP
```

**âœ… ONLY USE:**
```javascript
await mcp_kapture_keypress({ tabId, key: "ArrowDown" });
```

---

## Scroll Position Verification

### Initial (0%):
- Top of page
- Header fully visible
- Hero section in view

### Mid-checkpoints (5%-95%):
- Progressive content revelation
- Each section analyzed as it enters viewport
- Animations captured at trigger points

### Final (100%):
- Footer fully visible
- Contact section visible
- No more scroll possible (bottom reached)

---

## Example: Calibration Process

```javascript
// Step 1: Initial scan
let pressCount = 0;
while (true) {
  await mcp_kapture_keypress({ tabId, key: "ArrowDown" });
  pressCount++;
  
  // Check if footer visible (manual inspection)
  const screenshot = await mcp_kapture_screenshot({ tabId });
  // If footer visible, break
  if (footerVisible) break;
}

console.log(`Total presses: ${pressCount}`); // e.g., 120
const perCheckpoint = Math.ceil(pressCount / 20); // 6

// Step 2: Execute 21 checkpoints
for (let checkpoint = 0; checkpoint <= 20; checkpoint++) {
  // Scroll to checkpoint
  for (let i = 0; i < perCheckpoint; i++) {
    await mcp_kapture_keypress({ tabId, key: "ArrowDown" });
    await new Promise(resolve => setTimeout(resolve, 50));
  }
  
  // Wait for animations
  await new Promise(resolve => setTimeout(resolve, 300));
  
  // Capture & analyze (steps 2-6)
  // ...
}
```

---

## âš ï¸ NO EXCEPTIONS

**This is a STRICT requirement for EVERY page analysis.**

**Non-negotiable rules:**
1. Always use ArrowDown with calibration (never PageDown/End)
2. Complete all 21 checkpoints (no skipping)
3. Analyze EVERY checkpoint before moving to next
4. Test interactions at MULTIPLE positions
5. Reach 100% (footer visible) before finishing


#### Phase 3: Interaction Testing
1. User: "Hover over navigation menu"
2. AI: Execute hover, take screenshot
3. AI: Compare before/after in conversation
4. User: "Click that button"
5. AI: Execute click, analyze DOM changes
6. Repeat for all interactive elements

#### Phase 4: Responsive Check
1. User: "Resize to mobile (375x812)"
2. AI: Resize, capture, analyze
3. User: "Resize to tablet (768x1024)"
4. AI: Resize, capture, analyze
- **Tabs/Accordions**: Content switching, state changes
- **Forms**: Validation UI, error states (NO actual submission)
- **Carousels**: Slide transitions, navigation
- **Dropdowns**: Open/close states, selection UI

#### PHASE 4: Route Exploration
- BFS traversal (depth=3, max 10 routes)
- Extract sections from each route
- Identify: Hero, Features, Gallery, Team, Contact sections
- Plan single-page integration

#### PHASE 5: Data Analysis
- Cross-viewport comparison
- Interaction pattern catalog
- Animation detection summary
- Accessibility & SEO checks

#### PHASE 6: JSON Generation
- Compile all data into `IntegrationPrompt.json`
- Include viewport analysis, state comparisons, interaction evidence

---

## Exploration Principles

### 0. âš ï¸ ALWAYS USE KAPTURE MCP (Critical Rule)

**Before ANY exploration command, verify you're using Kapture:**

```javascript
// âœ… CORRECT - Kapture MCP tools (ALWAYS use these)
await mcp_kapture_list_tabs();
await mcp_kapture_dom({ tabId });
await mcp_kapture_elements({ tabId, visible: "true" });
await mcp_kapture_snapshot({ tabId });
await mcp_kapture_hover({ tabId, selector: ".card" });
await mcp_kapture_click({ tabId, selector: ".button" });
await mcp_kapture_resize({ tabId, width: 375, height: 812 });

// âŒ WRONG - Microsoft Playwright MCP (NEVER use)
// await mcp_microsoft_pla_browser_tabs({ action: "list" });
// await mcp_microsoft_pla_browser_snapshot();
// await mcp_microsoft_pla_browser_click({ ref: "...", element: "..." });

// âŒ WRONG - Generic Browser MCP (NEVER use)
// await mcp_browsermcp_browser_navigate({ url: "..." });
```

**Tool Prefix Guide:**
- âœ… `mcp_kapture_*` - Use these exclusively
- âŒ `mcp_microsoft_pla_*` - Do not use
- âŒ `mcp_browsermcp_*` - Do not use

### 1. DOM-First Analysis
```javascript
// âœ… Get DOM structure (Kapture)
await mcp_kapture_dom({ tabId });

// âœ… Get interactive elements (Kapture)
await mcp_kapture_elements({ tabId, visible: "true" });

// âœ… Get accessibility tree (Kapture)
await mcp_kapture_snapshot({ tabId });
```

### 2. State Comparison Pattern
```javascript
// Store before state (using Kapture MCP)
const beforeState = {
  dom: await mcp_kapture_dom({ tabId }),
  elements: await mcp_kapture_elements({ tabId })
};

// Execute interaction (using Kapture MCP)
await mcp_kapture_hover({ tabId, selector: ".card" });

// Get after state (using Kapture MCP)
const afterState = {
  dom: await mcp_kapture_dom({ tabId }),
  elements: await mcp_kapture_elements({ tabId })
};

// Compare and log changes
const changes = compareStates(beforeState, afterState);
```

### 3. Multi-Viewport Testing
```javascript
// Resize for each viewport (using Kapture MCP)
await mcp_kapture_resize({ tabId, width: 375, height: 812 }); // Mobile
// ... full exploration ...

await mcp_kapture_resize({ tabId, width: 768, height: 1024 }); // Tablet
// ... full exploration ...

await mcp_kapture_resize({ tabId, width: 1440, height: 900 }); // Desktop
// ... full exploration ...
```

### 4. UI-Only Testing
```javascript
// âœ… Test form validation UI
await mcp_kapture_click({ tabId, selector: "button[type='submit']" });
await mcp_kapture_elements({ tabId, selector: ".error" }); // Check errors

// âŒ DO NOT actually submit
// await mcp_kapture_fill({ tabId, selector: "input", value: "test" });
// await mcp_kapture_click({ tabId, selector: "submit" }); // STOP HERE
```

---

## ABSOLUTE REQUIREMENTS

1. âœ… **Follow agent script instructions** - execute MCP commands as guided
2. âœ… **Complete all 3 viewports** - no skipping mobile/tablet/desktop
3. âœ… **Store states in memory** - compare before/after for each interaction
4. âœ… **UI-only checks** - no form submissions or API calls
5. âœ… **Output to IntegrationPrompt.json** - single unified file

## Configuration

- **Viewports**: Mobile (375px), Tablet (768px), Desktop (1440px)
- **Max Depth**: 3 levels of route traversal
- **Max Interactions**: 50 per page
- **Page Timeout**: 5 minutes
- **Animation Wait**: 300ms after each interaction

## Success Criteria

- âœ… All 3 viewports fully explored
- âœ… All interactive elements tested
- âœ… All routes discovered and analyzed
- âœ… State comparisons logged for each interaction
- âœ… IntegrationPrompt.json generated with complete data

---

## Natural Language Command Detection

**The AI should intelligently detect user intent and route to appropriate pipelines.**

### Detection Strategy

When the user provides input, analyze it to determine the best command:

#### 1. **Explicit Commands** (Highest Priority)
User starts with a command:
- `/web` â†’ Web development pipeline
- `/pptx` â†’ Presentation pipeline  
- `/contents` â†’ Content analysis only
- `/style` â†’ Visual analysis only
- `/full` â†’ Complete pipeline

**Action:** Execute the specified command immediately.

#### 2. **Natural Language Intent Detection** (Auto-routing)

Analyze user input for keywords and context:

**Web Development Indicators:**
- Keywords: "ì›¹ì‚¬ì´íŠ¸", "ì‚¬ì´íŠ¸", "í™ˆí˜ì´ì§€", "HTML", "CSS", "ë°˜ì‘í˜•", "website", "site", "webpage", "landing page"
- URLs present: `https://`, `http://`, `www.`
- Phrases: "ì´ ì‚¬ì´íŠ¸", "ì›¹ ë¶„ì„", "í˜ì´ì§€ ë§Œë“¤ì–´", "ì‚¬ì´íŠ¸ êµ¬ì¡°", "ì½”ë“œ ìƒì„±"
- **Auto-route to:** `/web` pipeline

**Presentation Indicators:**
- Keywords: "í”„ë ˆì  í…Œì´ì…˜", "PPT", "PPTX", "ìŠ¬ë¼ì´ë“œ", "ë°œí‘œ", "í”¼ì¹­", "pitch deck", "slides"
- Context: "íˆ¬ì", "ì„¤ëª…íšŒ", "ì œì•ˆì„œ", "ë³´ê³ ì„œ"
- **Auto-route to:** `/pptx` pipeline

**Analysis Only Indicators:**
- Keywords: "ë¶„ì„ë§Œ", "êµ¬ì¡°ë§Œ", "ë””ìì¸ë§Œ", "ìƒ‰ìƒë§Œ", "ë ˆì´ì•„ì›ƒë§Œ"
- Phrases: "ì–´ë–»ê²Œ ë˜ì–´ìˆëŠ”ì§€", "êµ¬ì¡° íŒŒì•…", "ë””ìì¸ ì‹œìŠ¤í…œ"
- **Auto-route to:** `/contents` or `/style` based on context

#### 3. **Ambiguous Input** (Ask for Clarification)

When intent is unclear:
- URL provided but no clear output type mentioned
- Generic requests like "ë¶„ì„í•´ì¤˜", "analyze this"
- Multiple possible interpretations

**Action:** Present options to user:

```
ì´ ì‚¬ì´íŠ¸ë¥¼ ì–´ë–»ê²Œ ë¶„ì„í• ê¹Œìš”?

1. ğŸŒ /web - ì›¹ì‚¬ì´íŠ¸ ì „ì²´ ë¶„ì„ â†’ HTML/CSS/JS ì½”ë“œ ìƒì„±
2. ğŸ“Š /pptx - í”„ë ˆì  í…Œì´ì…˜ìš© ë¶„ì„ â†’ ìŠ¬ë¼ì´ë“œ ìŠ¤í™ ìƒì„±
3. ğŸ“ /contents - ì½˜í…ì¸  êµ¬ì¡°ë§Œ ë¶„ì„
4. ğŸ¨ /style - ë¹„ì£¼ì–¼/ìŠ¤íƒ€ì¼ë§Œ ë¶„ì„
5. ğŸ”„ /full - ì „ì²´ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰

ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ì§„í–‰í• ê¹Œìš”?
```

#### 4. **No Command and No Clear Intent**

When user input has no recognizable intent:
- Empty or very vague request
- No URLs or keywords

**Action:** Ask for clarification:

```
ë¶„ì„í•  ëŒ€ìƒê³¼ ëª©ì ì„ ì•Œë ¤ì£¼ì„¸ìš”:

- ì›¹ì‚¬ì´íŠ¸ URLì´ ìˆë‹¤ë©´ ì œê³µí•´ì£¼ì„¸ìš”
- ì›í•˜ëŠ” ê²°ê³¼ë¬¼: ì›¹ì‚¬ì´íŠ¸ ì½”ë“œ? í”„ë ˆì  í…Œì´ì…˜ ìŠ¤í™?
- íŠ¹ì • ë¶€ë¶„ë§Œ ë¶„ì„: ì½˜í…ì¸  êµ¬ì¡°? ë””ìì¸ ì‹œìŠ¤í…œ?
```

### Examples

| User Input | Detected Intent | Action |
|------------|----------------|--------|
| "https://example.com ë¶„ì„í•´ì¤˜" | URL only, ambiguous | **Ask:** ì›¹ì‚¬ì´íŠ¸ ì½”ë“œ ìƒì„±? í”„ë ˆì  í…Œì´ì…˜? |
| "ì´ ì‚¬ì´íŠ¸ HTMLë¡œ ë§Œë“¤ì–´ì¤˜" | Web development | **Auto-route:** `/web` |
| "PPT ë§Œë“¤ì–´ì¤˜" | Presentation | **Auto-route:** `/pptx` |
| "/web https://example.com" | Explicit command | **Execute:** `/web` |
| "ì´ ì›¹í˜ì´ì§€ ìƒ‰ìƒ ë¶„ì„" | Style analysis | **Auto-route:** `/style` |
| "ë¶„ì„" | Too vague | **Ask:** What to analyze? |

---

## Command System



### Two Primary Pipelines



| Command | Pipeline | Output | Description |---

|---------|----------|--------|-------------|

| **`/web`** | Web Development | HTML/CSS/JS Files | Complete web analysis â†’ responsive site code |

| **`/pptx`** | Presentation | PresentationSpec.json | Slide-focused analysis â†’ presentation spec |

## Command SystemThis system analyzes websites, designs, and user requirements to generate production-ready specifications and code for web development and presentations.## Overview## Overview

### Why Separate from Start?



**Web Development focuses on:**

- Multi-page navigation and site structure### Two Primary Pipelines

- Responsive design (mobile, tablet, desktop)

- SEO optimization and structured data

- Interactive components (forms, modals, animations)

- Accessibility (WCAG 2.1 AA)| Command | Pipeline | Output | Description |## Architecture

- Web-specific: hover states, scroll behaviors, browser compatibility

|---------|----------|--------|-------------|

**Presentation Design focuses on:**

- Slide-by-slide narrative flow| **`/web`** | Web Development | HTML/CSS/JS Files | Complete web analysis â†’ responsive site code |

- One main point per slide (minimal text)

- Visual storytelling and data visualization| **`/pptx`** | Presentation | PresentationSpec.json | Slide-focused analysis â†’ presentation spec |

- Speaker notes vs on-slide content

- Projection-friendly design (high contrast, large fonts)```This system analyzes websites, designs, and user requirements to generate production-ready specifications and code for web development and presentations.This system analyzes websites, designs, and user requirements to generate production-ready specifications and code for web development and presentations.

- Presentation-specific: transitions, timing, audience engagement

### Why Separate from Start?

**Attempting to use shared analysis for both would result in:**

- âŒ Web sites with too little content (presentation mindset)User Input â†’ Command Router â†’ Specialized Instruction â†’ Output

- âŒ Presentations with too much text (web mindset)

- âŒ Mismatched design systems (web needs hover states, presentations don't)**Web Development focuses on:**



---- Multi-page navigation and site structure```



## Command Usage- Responsive design (mobile, tablet, desktop)



### 1. Web Development (`/web`)- SEO optimization and structured data



```- Interactive components (forms, modals, animations)

User: /web [user input or existing web_contents.json]

```- Accessibility (WCAG 2.1 AA)### Command Router (This File)## Architecture## Architecture



**Pipeline:**- Web-specific: hover states, scroll behaviors, browser compatibility

```

01_contents_web â†’ 02_style_web â†’ 03_integrate_web â†’ 04_generate_[html|tailwind]- Detects user commands and routes to appropriate instruction files

```

**Presentation Design focuses on:**

**Outputs:**

- âš ï¸ **OVERWRITE** `instruction/web-pipeline/01_contents_web.json` with analysis results
- âš ï¸ **OVERWRITE** `instruction/web-pipeline/02_style_web.json` with design system
- âš ï¸ **OVERWRITE** `instruction/web-pipeline/03_integrate_web.json` with integrated spec
- **Final code:** HTML/CSS/JS files in `output/web/`

**âš ï¸ DO NOT create `output/web_contents.json`, `output/nauta_web_style.json`, etc. Always overwrite instruction files directly.**

- Visual storytelling and data visualization- Manages the overall pipeline flow

**User Input Format:**

```json- Speaker notes vs on-slide content

{

  "outputType": "web",- Projection-friendly design (high contrast, large fonts)``````

  "sitePurpose": "E-commerce site for handmade jewelry",

  "targetAudience": {- Presentation-specific: transitions, timing, audience engagement

    "country": "Global",

    "interests": ["Fashion", "Handmade Crafts"]### Specialized Instructions (`instruction/` directory)

  },

  "requiredFeatures": ["productGallery", "cart", "contactForm", "search"],**Attempting to use shared analysis for both would result in:**

  "brandGuide": {

    "primaryColor": "#D4AF37",- âŒ Web sites with too little content (presentation mindset)- Organized by domain (analysis, web, presentation)User Input â†’ Command Router â†’ Specialized Instruction â†’ OutputUser Input â†’ Command Router â†’ Specialized Instruction â†’ Output

    "secondaryColor": "#2C2C2C",

    "accentColor": "AI-Default",- âŒ Presentations with too much text (web mindset)

    "fontFamily": "Playfair Display, sans-serif",

    "tone": ["Elegant", "Artisanal", "Trustworthy"]- âŒ Mismatched design systems (web needs hover states, presentations don't)- Each JSON file contains domain-specific generation logic

  },

  "referenceSites": ["https://example-jewelry.com"],

  "imageAssets": [],

  "specialRequests": ["Product zoom on hover", "Instagram feed integration"]---- Fully self-contained with examples and quality checks``````

}

```



### 2. Presentation (`/pptx`)   ## Command Usage- Can be extended independently



```

User: /pptx [user input or existing pptx_contents.json]

```### 1. Web Development (`/web`)



**Pipeline:**

```

01_contents_pptx â†’ 02_style_pptx â†’ 03_integrate_pptx â†’ 04_generate_pptx```---

```

User: /web [user input or existing web_contents.json]

**Outputs:**

- âš ï¸ **OVERWRITE** `instruction/presentation-pipeline/01_contents_pptx.json` with analysis results
- âš ï¸ **OVERWRITE** `instruction/presentation-pipeline/02_style_pptx.json` with design system
- âš ï¸ **OVERWRITE** `instruction/presentation-pipeline/03_integrate_pptx.json` with integrated spec
- **Final spec:** `output/pptx/PresentationSpec.json` with slide details

**âš ï¸ DO NOT create `output/pptx_contents.json`, `output/pptx_style.json`, etc. Always overwrite instruction files directly.**

**Pipeline:**## Command System

**User Input Format:**

```json```

{

  "outputType": "pptx",01_contents_web â†’ 02_style_web â†’ 03_integrate_web â†’ 04_generate_[html|tailwind]- Detects user commands and routes to appropriate instruction files- Detects user commands and routes to appropriate instruction files

  "presentationType": "pitch",

  "purpose": "Investor pitch for AI startup",```

  "targetAudience": {

    "role": "investors",### Available Commands

    "knowledge": "intermediate",

    "interests": ["AI/ML", "SaaS", "B2B"]**Outputs:**

  },

  "duration": 15,- `web_contents.json` - Web-specific content structure- Defines common rules and validation logic- Defines common rules and validation logic

  "deliveryFormat": "in-person",

  "keyMessages": [- `web_style.json` - Responsive design system  

    "Market opportunity is massive ($50B by 2027)",

    "Our AI reduces costs by 40%",- `WebDevSpec.json` - Complete developer specification| Command | Purpose | Input | Output | Instruction File |

    "Proven traction: 100 paying customers"

  ],- **Final code:** HTML/CSS/JS files

  "brandGuide": {

    "primaryColor": "#1E40AF",|---------|---------|-------|--------|------------------|- Manages the overall pipeline flow- Manages the overall pipeline flow

    "secondaryColor": "#F3F4F6",

    "accentColor": "#10B981",**User Input Format:**

    "fontFamily": "Inter",

    "tone": ["Professional", "Data-driven", "Confident"]```json| **`/contents`** | Content analysis & structure | User requirements, site purpose | `contents.json` | `analysis/contents_system_instruction.json` |

  },

  "referencePresentations": ["Tesla investor deck", "Airbnb Series B pitch"],{

  "specialRequests": ["Heavy focus on traction metrics", "Minimal text per slide"]

}  "outputType": "web",| **`/style`** | Visual & layout analysis | Images, reference sites | `style.json` | `analysis/style_system_instruction.json` |

```

  "sitePurpose": "E-commerce site for handmade jewelry",

---

  "targetAudience": {| **`/integrate`** | Merge contents + style into dev spec | `contents.json` + `style.json` | `integrate.json` | `analysis/integrate_system_instruction.json` |

## Output Directory Structure

    "country": "Global",

**All generated files are saved to the `output/` directory:**

    "interests": ["Fashion", "Handmade Crafts"]| **`/html`** | Generate semantic HTML/CSS/JS | `IntegrationPrompt.json` | Multi-file web project | `web/html_system_instruction.json` |### Specialized Instructions (`instruction/` directory)### Specialized Instructions (`instruction/` directory)

```

output/  },

â”œâ”€â”€ web/                              â† Web development outputs

â”‚   â”œâ”€â”€ index.html                    â† Main HTML file  "requiredFeatures": ["productGallery", "cart", "contactForm", "search"],| **`/html-tailwind`** | Generate single-file Tailwind app | `IntegrationPrompt.json` | Single HTML file | `web/html_tailwind_instruction.json` |

â”‚   â”œâ”€â”€ styles/

â”‚   â”‚   â”œâ”€â”€ main.css  "brandGuide": {

â”‚   â”‚   â””â”€â”€ responsive.css

â”‚   â”œâ”€â”€ scripts/    "primaryColor": "#D4AF37",| **`/pptx`** | Generate PowerPoint spec | User input + analysis | `PresentationSpec.json` | `presentation/pptx_system_instruction.json` |- Each JSON file contains domain-specific generation logic- Each JSON file contains domain-specific generation logic

â”‚   â”‚   â””â”€â”€ main.js

â”‚   â”œâ”€â”€ assets/    "secondaryColor": "#2C2C2C",

â”‚   â”‚   â””â”€â”€ images/

â”‚   â””â”€â”€ README.md                     â† Setup & deployment guide    "accentColor": "AI-Default",| **`/full`** | Run complete pipeline | All inputs | All outputs | All instructions |

â”‚

â”œâ”€â”€ pptx/                             â† Presentation outputs    "fontFamily": "Playfair Display, sans-serif",

â”‚   â”œâ”€â”€ PresentationSpec.json         â† Complete slide specifications

â”‚   â”œâ”€â”€ slides-outline.md             â† Human-readable outline    "tone": ["Elegant", "Artisanal", "Trustworthy"]- Fully self-contained with examples and quality checks- Fully self-contained with examples and quality checks

â”‚   â”œâ”€â”€ design-tokens.json            â† Design system reference

â”‚   â””â”€â”€ README.md                     â† Usage guide  },

â”‚

â”œâ”€â”€ web_contents.json                 â† Intermediate analysis files
â”œâ”€â”€ web_style.json
â”œâ”€â”€ WebDevSpec.json
â”œâ”€â”€ pptx_contents.json
â”œâ”€â”€ pptx_style.json
â”œâ”€â”€ PresentationSpec.json
â””â”€â”€ captures/                         â† MCP exploration screenshots
    â”œâ”€â”€ 20251107_143012_step-01_home_navigate.png
    â”œâ”€â”€ 20251107_143015_step-02_works_click.png
    â””â”€â”€ route-map.json
```

**Directory Rules:**

- **`output/web/`**: All HTML, CSS, JS, and web assets (final deliverable)

- **`output/pptx/`**: PresentationSpec.json and related files (final deliverable)

- **`instruction/web-pipeline/*.json`**: Web analysis intermediate files (OVERWRITE during pipeline)

- **`instruction/presentation-pipeline/*.json`**: Presentation analysis intermediate files (OVERWRITE during pipeline)

- **`output/captures/`**: MCP exploration screenshots and evidence

- âš ï¸ **DO NOT create new JSON files in `output/` root** (e.g., `output/nauta_web_contents.json`)

- Clean separation prevents mixing web and presentation artifacts

- Each pipeline maintains its own deliverable directoryUser: /pptx [user input or existing pptx_contents.json]



---```2. **No command**: Execute `/full` pipeline------



## Pipeline Details



### Web Pipeline**Pipeline:**   - Sequence: `/contents` â†’ `/style` â†’ `/integrate` â†’ Ask user for output format



#### 01. Web Content Analysis (`01_contents_web.json`)```

**Focus:** Site structure, SEO, navigation, interactive elements

01_contents_pptx â†’ 02_style_pptx â†’ 03_integrate_pptx â†’ 04_generate_pptx

**Key Outputs:**

- Page structure (Home, About, Products, Contact, etc.)```

- Navigation hierarchy (header menu, footer, breadcrumbs)

- Interactive elements (forms, modals, tooltips)3. **Invalid command**: Suggest available commands

- SEO metadata for each page

- Accessibility requirements (alt text, ARIA labels)**Outputs:**

- Content visibility at different breakpoints

- `pptx_contents.json` - Slide structure and narrative## Command System## Command System

**Example Section:**

```json- `pptx_style.json` - Presentation design system

{

  "siteStructure": {- `PresentationSpec.json` - Complete slide specifications---

    "pages": [

      {"id": "P1", "path": "/", "title": "Home", "priority": "high", "seoFocus": true},

      {"id": "P2", "path": "/shop", "title": "Shop", "priority": "high"}

    ],**User Input Format:**

    "navigation": {

      "header": {```json

        "logo": "Brand Logo",

        "menuItems": [{## Common Principles

          {"id": "N1", "label": "Shop", "link": "/shop", "subItems": ["Rings", "Necklaces"]},

          {"id": "N2", "label": "About", "link": "/about"}  "outputType": "pptx",

        ],

        "cta": "Cart (0)"  "presentationType": "pitch",### Available Commands### Available Commands

      }

    }  "purpose": "Investor pitch for AI startup",

  }

}  "targetAudience": {### 1. Input Collection

```

    "role": "investors",

#### 02. Web Style Analysis (`02_style_web.json`)

**Focus:** Responsive design tokens, component states, CSS specifications    "knowledge": "intermediate",



**Key Outputs:**    "interests": ["AI/ML", "SaaS", "B2B"]

- Complete color system (brand, semantic, neutral, states)

- Responsive typography (clamp for fluid sizing)  },All commands accept structured user input:

- Spacing system (consistent scale)

- Component patterns (buttons, forms, cards with all states)  "duration": 15,

- Interaction patterns (hover, focus, scroll animations)

- Breakpoint-specific behaviors  "deliveryFormat": "in-person",| Command | Purpose | Input | Output | Instruction File || Command | Purpose | Input | Output | Instruction File |



**Example:**  "keyMessages": [

```json

{    "Market opportunity is massive ($50B by 2027)",```json

  "designSystem": {

    "colors": {    "Our AI reduces costs by 40%",

      "brand": {"primary": {"hex": "#D4AF37", "rgb": "212, 175, 55"}},

      "semantic": {"success": {"hex": "#10B981", "usage": "form success"}},    "Proven traction: 100 paying customers"{|---------|---------|-------|--------|------------------||---------|---------|-------|--------|------------------|

      "states": {"hover": "rgba(212, 175, 55, 0.08)"}

    },  ],

    "typography": {

      "scale": {  "brandGuide": {  "sitePurpose": "string - Main goal of the site/presentation",

        "h1": "clamp(2.5rem, 5vw, 4rem)",

        "body": "clamp(1rem, 1.5vw, 1.125rem)"    "primaryColor": "#1E40AF",

      }

    },    "secondaryColor": "#F3F4F6",  "targetAudience": {| **`/contents`** | Content analysis & structure | User requirements, site purpose | `contents.json` | `contents_system_instruction.json` || **`/contents`** | Content analysis & structure | User requirements, site purpose | `contents.json` | `contents_system_instruction.json` |

    "componentPatterns": {

      "buttons": {    "accentColor": "#10B981",

        "primary": {

          "default": {"background": "#D4AF37", "padding": "0.75rem 1.5rem"},    "fontFamily": "Inter",    "country": "string - Geographic target",

          "hover": {"background": "#C19A2E", "transform": "translateY(-2px)"},

          "focus": {"outline": "2px solid #D4AF37", "outlineOffset": "2px"}    "tone": ["Professional", "Data-driven", "Confident"]

        }

      }  },    "interests": ["array of user interests"]| **`/style`** | Visual & layout analysis | Images, reference sites | `style.json` | `style_system_instruction.json` || **`/style`** | Visual & layout analysis | Images, reference sites | `style.json` | `style_system_instruction.json` |

    }

  }  "referencePresentations": ["Tesla investor deck", "Airbnb Series B pitch"],

}

```  "specialRequests": ["Heavy focus on traction metrics", "Minimal text per slide"]  },



#### 03. Web Integration (`03_integrate_web.json`)}

**Focus:** Merge content + style into complete developer spec

```  "requiredFeatures": ["array - e.g., contactForm, gallery, cart"],| **`/integrate`** | Merge contents + style into dev spec | `contents.json` + `style.json` | `integrate.json` | `integrate_system_instruction.json` || **`/integrate`** | Merge contents + style into dev spec | `contents.json` + `style.json` | `integrate.json` | `integrate_system_instruction.json` |

**Key Outputs:**

- Page-by-page HTML/CSS/JS specifications

- Complete component library with variations

- Responsive behavior documented---  "brandGuide": {

- Accessibility requirements mapped

- Performance optimizations specified

- Ready for code generation

## Pipeline Details    "primaryColor": "#hex",| **`/html`** | Generate semantic HTML/CSS/JS | `IntegrationPrompt.json` | Multi-file web project | `html_system_instruction.json` || **`/html`** | Generate semantic HTML/CSS/JS | `IntegrationPrompt.json` | Multi-file web project | `html_system_instruction.json` |

#### 04. Code Generation



**Option A: Semantic HTML** (`04_generate_html.json`)

- Multi-file structure (separate HTML, CSS, JS)### Web Pipeline    "secondaryColor": "#hex",

- BEM methodology for CSS

- Vanilla JavaScript

- Semantic HTML5

- Production-ready, modular#### 01. Web Content Analysis (`01_contents_web.json`)    "accentColor": "#hex or 'AI-Default'",| **`/html-tailwind`** | Generate single-file Tailwind app | `IntegrationPrompt.json` | Single HTML file | `html_tailwind_instruction.json` || **`/html-tailwind`** | Generate single-file Tailwind app | `IntegrationPrompt.json` | Single HTML file | `html_tailwind_instruction.json` |

- **Output:** `output/web/index.html`, `output/web/styles/`, `output/web/scripts/`

**Focus:** Site structure, SEO, navigation, interactive elements

**Option B: Tailwind Single-Page** (`04_generate_tailwind.json`)

- Single-file app with Tailwind CSS v4 CDN    "fontFamily": "string",

- State management built-in

- Rapid prototyping friendly**Key Outputs:**

- Modern utility-first approach

- **Output:** `output/web/index.html` (single file)- Page structure (Home, About, Products, Contact, etc.)    "tone": ["array - e.g., Modern, Professional"]| **`/pptx`** | Generate PowerPoint spec | User input + analysis | `PresentationSpec.json` | `pptx_system_instruction.json` || **`/pptx`** | Generate PowerPoint spec | User input + analysis | `PresentationSpec.json` | `pptx_system_instruction.json` |



---- Navigation hierarchy (header menu, footer, breadcrumbs)



### Presentation Pipeline- Interactive elements (forms, modals, tooltips)  },



#### 01. Presentation Content Analysis (`01_contents_pptx.json`)- SEO metadata for each page

**Focus:** Slide narrative, key messages, audience engagement

- Accessibility requirements (alt text, ARIA labels)  "referenceSites": ["array of URLs"],| **`/full`** | Run complete pipeline | All inputs | All outputs | All instructions || **`/full`** | Run complete pipeline | All inputs | All outputs | All instructions |

**Key Outputs:**

- Presentation structure (opening, body, closing)- Content visibility at different breakpoints

- Slide-by-slide outline with types and layouts

- Content units optimized for slides (concise bullets)  "imageAssets": ["array of image URLs or paths"],

- Speaker notes vs on-slide content separation

- Timing and pacing recommendations**Example Section:**

- Engagement points (questions, polls, pauses)

```json  "specialRequests": ["array - specific requirements"]

**Example:**

```json{

{

  "presentationStructure": {  "siteStructure": {}

    "title": "AI Cost Reduction Platform - Series A Pitch",

    "totalSlides": 12,    "pages": [

    "estimatedDuration": 15,

    "sections": [      {"id": "P1", "path": "/", "title": "Home", "priority": "high", "seoFocus": true},```### Command Detection Rules### Command Detection Rules

      {

        "id": "S1",      {"id": "P2", "path": "/shop", "title": "Shop", "priority": "high"}

        "title": "Problem",

        "slideCount": 2,    ],

        "keyMessage": "Enterprise AI costs are spiraling out of control"

      }    "navigation": {

    ]

  },      "header": {### 2. Validation Rules

  "slideOutline": [

    {        "logo": "Brand Logo",

      "slideNumber": 1,

      "type": "title",        "menuItems": [

      "layout": "title_only",

      "content": {          {"id": "N1", "label": "Shop", "link": "/shop", "subItems": ["Rings", "Necklaces"]},

        "title": "Revolutionizing Enterprise AI",

        "subtitle": "40% Cost Reduction, Zero Compromises",          {"id": "N2", "label": "About", "link": "/about"}- **Required fields**: `sitePurpose`, `targetAudience`, `requiredFeatures`, `brandGuide`1. **Explicit command**: User starts input with `/command`1. **Explicit command**: User starts input with `/command`

        "speakerNotes": "Start with confidence. Make eye contact. Pause after title."

      },        ],

      "timing": {"suggestedDuration": 30}

    }        "cta": "Cart (0)"- **Missing optional data**: Fill with `"AI-Default"` and notify user

  ]

}      }

```

    }- **Invalid data**: Ask user for clarification, don't proceed   - Example: `/html` â†’ Load `html_system_instruction.json`   - Example: `/html` â†’ Load `html_system_instruction.json`

#### 02. Presentation Style Analysis (`02_style_pptx.json`)

**Focus:** Slide masters, projection-friendly design, visual hierarchy  }



**Key Outputs:**}

- Slide master layouts (title, content, section break, data, closing)

- Color system for projection (high contrast, no pure white)```

- Typography for readability at distance (min 24pt body, 36pt titles)

- Data visualization styles (charts, diagrams)### 3. MCP Integration (Live Site Exploration)      

- Image treatment and overlays

- Branding (logo, footer, consistency)#### 02. Web Style Analysis (`02_style_web.json`)



**Example:****Focus:** Responsive design tokens, component states, CSS specifications

```json

{

  "presentationDesignSystem": {

    "slideSize": {"aspectRatio": "16:9", "width": 1920, "height": 1080},**Key Outputs:**When reference sites are provided, use **Kapture MCP** or **Browser MCP** to:2. **No command**: Execute `/full` pipeline2. **No command**: Execute `/full` pipeline

    "colors": {

      "presentation": {- Complete color system (brand, semantic, neutral, states)

        "background": {"main": "#F9FAFB", "dark": "#1F2937"},

        "text": {"primary": "#111827", "secondary": "#6B7280"}- Responsive typography (clamp for fluid sizing)

      },

      "contrastGuidelines": {- Spacing system (consistent scale)

        "minimumContrast": "7:1",

        "reasoning": "Presentations viewed at distance require higher contrast"- Component patterns (buttons, forms, cards with all states)1. **Navigate** to the site and capture initial state   - Sequence: `/contents` â†’ `/style` â†’ `/integrate` â†’ Ask user for output format   - Sequence: `/contents` â†’ `/style` â†’ `/integrate` â†’ Ask user for output format

      }

    },- Interaction patterns (hover, focus, scroll animations)

    "typography": {

      "scale": {- Breakpoint-specific behaviors2. **Explore** key interactions (navigation, forms, modals, animations)

        "slideTitle": {"size": 44, "weight": "bold", "lineHeight": 1.2},

        "bodyText": {"size": 24, "weight": "regular", "lineHeight": 1.5}

      },

      "readabilityGuidelines": {**Example:**3. **Screenshot** at each interaction point

        "minimumSize": "24pt for body text",

        "maximumLineLength": "10-12 words per line"```json

      }

    },{4. **Log** all evidence in the output JSON

    "layout": {

      "masters": [  "designSystem": {

        {

          "id": "M1",    "colors": {3. **Invalid command**: Suggest available commands3. **Invalid command**: Suggest available commands

          "name": "title_slide",

          "structure": {      "brand": {"primary": {"hex": "#D4AF37", "rgb": "212, 175, 55"}},

            "titlePosition": "center",

            "layout": "centered",      "semantic": {"success": {"hex": "#10B981", "usage": "form success"}},**Screenshot Naming Convention:**

            "imageArea": "full-bleed background"

          }      "states": {"hover": "rgba(212, 175, 55, 0.08)"}

        }

      ]    },```

    }

  }    "typography": {

}

```      "scale": {YYYYMMDD_HHMMSS_step-<nn>_route-<path>_<action>.png



#### 03. Presentation Integration (`03_integrate_pptx.json`)        "h1": "clamp(2.5rem, 5vw, 4rem)",

**Focus:** Complete slide-by-slide specifications with all details

        "body": "clamp(1rem, 1.5vw, 1.125rem)"```------

**Key Outputs:**

- Every slide fully specified (layout, content, styling, timing)      }

- Speaker notes for each slide

- Data visualizations with annotations    },

- Asset library (images, icons, logo)

- Delivery guidance (pacing, emphasis, adaptations)    "componentPatterns": {

- Export specifications (PPTX, PDF, video)

      "buttons": {**Storage:**

#### 04. PPTX Generation (`04_generate_pptx.json`)

**Output:** Complete presentation specification ready for PowerPoint/Keynote creation        "primary": {

- **File:** `output/pptx/PresentationSpec.json`

- **Format:** Slide-by-slide JSON with all styling, content, and timing          "default": {"background": "#D4AF37", "padding": "0.75rem 1.5rem"},```

- **Includes:** Design tokens, asset references, speaker notes

          "hover": {"background": "#C19A2E", "transform": "translateY(-2px)"},

---

          "focus": {"outline": "2px solid #D4AF37", "outlineOffset": "2px"}./captures/## Common Principles## Common Principles

## Common Principles

        }

### 1. Input Validation

      }  â”œâ”€â”€ 20251107_143012_step-01_home_navigate.png

**Required Fields:**

- `outputType` (web or pptx)    }

- `sitePurpose` or `purpose`

- `targetAudience`  }  â”œâ”€â”€ 20251107_143015_step-02_works_click.png

- `brandGuide` (at minimum: primaryColor, secondaryColor, fontFamily, tone)

}

**Optional Fields:**

- If missing: Insert `"AI-Default"` and notify user```  â””â”€â”€ route-map.json

- User can modify later



### 2. MCP Integration (Site Exploration)

#### 03. Web Integration (`03_integrate_web.json`)```### 1. Input Collection### 1. Input Collection

When `referenceSites` provided, use **Kapture MCP** or **Browser MCP** to:

**Focus:** Merge content + style into complete developer spec

1. **Navigate** to reference sites

2. **Explore** interactions (navigation, forms, modals, animations)

3. **Screenshot** at every key moment

4. **Log** all evidence in output JSON**Key Outputs:**



**Screenshot Naming:**- Page-by-page HTML/CSS/JS specifications### 4. Output Standards

```

YYYYMMDD_HHMMSS_step-<nn>_route-<path>_<action>.png- Complete component library with variations

```

- Responsive behavior documented

**Storage:**

```- Accessibility requirements mapped

output/captures/

  â”œâ”€â”€ 20251107_143012_step-01_home_navigate.png- Performance optimizations specifiedAll outputs must be:All commands accept structured user input:All commands accept structured user input:

  â”œâ”€â”€ 20251107_143015_step-02_shop_click.png

  â””â”€â”€ route-map.json- Ready for code generation

```

- âœ… **Valid JSON** (for specification files)

### 3. Image Handling

#### 04. Code Generation

**Default Policy:**

- When no images provided: Use `{ "src": "random", "ratio": "16:9" }`- âœ… **Well-documented** (comments, README files)

- Uses picsum.photos for placeholders

- Replace immediately when user provides actual images**Option A: Semantic HTML** (`04_generate_html.json`)



### 4. Accessibility- Multi-file structure (separate HTML, CSS, JS)- âœ… **Production-ready** (no placeholders except images)



**Web (WCAG 2.1 AA minimum):**- BEM methodology for CSS

- 4.5:1 contrast for text, 3:1 for UI components

- Keyboard navigation for all interactions- Vanilla JavaScript- âœ… **Accessible** (WCAG 2.1 AA minimum)```json```json

- Alt text for all images

- ARIA labels where needed- Semantic HTML5

- Focus indicators visible

- Production-ready, modular- âœ… **Responsive** (mobile-first approach)

**Presentation (WCAG AAA for large text):**

- 7:1 contrast (higher for projection)

- Min 24pt body, 36pt titles

- Alt text for charts and images**Option B: Tailwind Single-Page** (`04_generate_tailwind.json`){{

- Don't rely on color alone

- Reading order logical- Single-file app with Tailwind CSS v4 CDN



---- State management built-in### 5. Image Handling



## File Structure- Rapid prototyping friendly



```- Modern utility-first approach  "sitePurpose": "string - Main goal of the site/presentation",  "sitePurpose": "string - Main goal of the site/presentation",

workspace/

â”œâ”€â”€ .github/

â”‚   â””â”€â”€ copilot-instructions.md          â† This file (main router)

â”œâ”€â”€ instruction/---**Default Policy:**

â”‚   â”œâ”€â”€ web-pipeline/

â”‚   â”‚   â”œâ”€â”€ 01_contents_web.json         â† Web content analysis

â”‚   â”‚   â”œâ”€â”€ 02_style_web.json            â† Web design system extraction

â”‚   â”‚   â”œâ”€â”€ 03_integrate_web.json        â† Web specification integration### Presentation Pipeline- When no specific images provided: Use `picsum.photos` random images  "targetAudience": {  "targetAudience": {

â”‚   â”‚   â””â”€â”€ generators/

â”‚   â”‚       â”œâ”€â”€ 04_generate_html.json    â† Semantic HTML/CSS/JS generator

â”‚   â”‚       â””â”€â”€ 04_generate_tailwind.json â† Tailwind single-file generator

â”‚   â””â”€â”€ presentation-pipeline/#### 01. Presentation Content Analysis (`01_contents_pptx.json`)- Format: `{ "src": "random", "ratio": "16:9" }`

â”‚       â”œâ”€â”€ 01_contents_pptx.json        â† Presentation content analysis

â”‚       â”œâ”€â”€ 02_style_pptx.json           â† Presentation design system**Focus:** Slide narrative, key messages, audience engagement

â”‚       â”œâ”€â”€ 03_integrate_pptx.json       â† Presentation spec integration

â”‚       â””â”€â”€ generators/- Replace immediately when user provides actual images    "country": "string - Geographic target",    "country": "string - Geographic target",

â”‚           â””â”€â”€ 04_generate_pptx.json    â† Presentation generator

â””â”€â”€ output/                              â† All generated outputs**Key Outputs:**

    â”œâ”€â”€ web/                             â† Web files (HTML/CSS/JS)

    â”œâ”€â”€ pptx/                            â† Presentation specs- Presentation structure (opening, body, closing)

    â”œâ”€â”€ captures/                        â† MCP screenshots

    â”œâ”€â”€ web_contents.json                â† Intermediate analysis- Slide-by-slide outline with types and layouts

    â”œâ”€â”€ web_style.json

    â”œâ”€â”€ WebDevSpec.json- Content units optimized for slides (concise bullets)**Examples:**    "interests": ["array of user interests"]    "interests": ["array of user interests"]

    â”œâ”€â”€ pptx_contents.json

    â”œâ”€â”€ pptx_style.json- Speaker notes vs on-slide content separation

    â””â”€â”€ PresentationSpec.json

```- Timing and pacing recommendations```html



---- Engagement points (questions, polls, pauses)



## Execution Workflow<!-- Placeholder -->  },  },



### Command Detection**Example:**



1. **User provides `/web`** â†’ Execute web pipeline```json<img src="https://picsum.photos/1920/1080?random=1" alt="Hero image">

2. **User provides `/pptx`** â†’ Execute presentation pipeline

3. **No command but `outputType: "web"` in input** â†’ Execute web pipeline{

4. **No command but `outputType: "pptx"` in input** â†’ Execute presentation pipeline

5. **No command, no outputType** â†’ Ask user: "Web site or Presentation?"  "presentationStructure": {  "requiredFeatures": ["array - e.g., contactForm, gallery, cart"],  "requiredFeatures": ["array - e.g., contactForm, gallery, cart"],



### Web Pipeline Execution    "title": "AI Cost Reduction Platform - Series A Pitch",



```    "totalSlides": 12,<!-- User-provided -->

/web [user input]

  â†“    "estimatedDuration": 15,

01. Load 01_contents_web.json instruction

  â†“ Analyze web-specific content structure    "sections": [<img src="assets/images/hero.jpg" alt="Company headquarters">  "brandGuide": {  "brandGuide": {

  â†“ OVERWRITE instruction/web-pipeline/01_contents_web.json

  â†“      {

02. Load 02_style_web.json instruction

  â†“ Extract responsive design system        "id": "S1",```

  â†“ OVERWRITE instruction/web-pipeline/02_style_web.json

  â†“        "title": "Problem",

03. Load 03_integrate_web.json instruction

  â†“ Merge content + style        "slideCount": 2,    "primaryColor": "#hex",    "primaryColor": "#hex",

  â†“ OVERWRITE instruction/web-pipeline/03_integrate_web.json

  â†“        "keyMessage": "Enterprise AI costs are spiraling out of control"

04. Ask user: "Semantic HTML or Tailwind?"

  â†“      }---

  â”œâ”€â†’ Load 04_generate_html.json â†’ output/web/ (multi-file)

  â””â”€â†’ Load 04_generate_tailwind.json â†’ output/web/index.html (single-file)    ]

```

  },    "secondaryColor": "#hex",    "secondaryColor": "#hex",

### Presentation Pipeline Execution

  "slideOutline": [

```

/pptx [user input]    {## Pipeline Execution Flow

  â†“

01. Load 01_contents_pptx.json instruction      "slideNumber": 1,

  â†“ Analyze slide narrative and structure

  â†“ OVERWRITE instruction/presentation-pipeline/01_contents_pptx.json      "type": "title",    "accentColor": "#hex or 'AI-Default'",    "accentColor": "#hex or 'AI-Default'",

  â†“

02. Load 02_style_pptx.json instruction      "layout": "title_only",

  â†“ Extract presentation design system

  â†“ OVERWRITE instruction/presentation-pipeline/02_style_pptx.json      "content": {### Full Pipeline (`/full`)

  â†“

03. Load 03_integrate_pptx.json instruction        "title": "Revolutionizing Enterprise AI",

  â†“ Create complete slide specifications

  â†“ OVERWRITE instruction/presentation-pipeline/03_integrate_pptx.json        "subtitle": "40% Cost Reduction, Zero Compromises",    "fontFamily": "string",    "fontFamily": "string",

  â†“

04. Load 04_generate_pptx.json instruction        "speakerNotes": "Start with confidence. Make eye contact. Pause after title."

  â†“ Deliver output/pptx/PresentationSpec.json with usage guidance

```      },```



---      "timing": {"suggestedDuration": 30}



## Quality Checklist    }1. /collect    "tone": ["array - e.g., Modern, Professional"]    "tone": ["array - e.g., Modern, Professional"]



Before delivering any output:  ]



### Web}   â†“ Gather all user inputs

- [ ] All content mapped to responsive components

- [ ] Design tokens applied (no hard-coded values)```

- [ ] All interactive states documented (hover, focus, active, disabled)

- [ ] Responsive behavior specified for mobile, tablet, desktop     },  },

- [ ] Accessibility WCAG 2.1 AA met

- [ ] SEO metadata complete#### 02. Presentation Style Analysis (`02_style_pptx.json`)

- [ ] Performance optimizations specified

- [ ] Files saved to `output/web/`**Focus:** Slide masters, projection-friendly design, visual hierarchy2. /validate



### Presentation

- [ ] One main point per slide

- [ ] Max 6 lines of text per slide**Key Outputs:**   â†“ Check required fields, fill defaults  "referenceSites": ["array of URLs"],  "referenceSites": ["array of URLs"],

- [ ] Typography readable (min 24pt body, 36pt titles)

- [ ] Contrast 7:1 for projection- Slide master layouts (title, content, section break, data, closing)

- [ ] Speaker notes for each content slide

- [ ] Timing realistic and engagement planned- Color system for projection (high contrast, no pure white)   

- [ ] Alt text for all visuals

- [ ] Clear call-to-action on closing slide- Typography for readability at distance (min 24pt body, 36pt titles)

- [ ] Files saved to `output/pptx/`

- Data visualization styles (charts, diagrams)3. /contents  "imageAssets": ["array of image URLs or paths"],  "imageAssets": ["array of image URLs or paths"],

---

- Image treatment and overlays

## Version History

- Branding (logo, footer, consistency)   â†“ Analyze requirements, structure content

- **v2.0.0** (2025-11-07): Complete restructure - separate pipelines from start, no shared analysis, output/ directory organization

- **v1.0.0** (2025-11-07): Initial modular architecture with shared analysis (deprecated)


**Example:**   â†“ Output: contents.json  "specialRequests": ["array - specific requirements"]  "specialRequests": ["array - specific requirements"]

```json

{   

  "presentationDesignSystem": {

    "slideSize": {"aspectRatio": "16:9", "width": 1920, "height": 1080},4. /style}}

    "colors": {

      "presentation": {   â†“ Extract visual patterns from images/references

        "background": {"main": "#F9FAFB", "dark": "#1F2937"},

        "text": {"primary": "#111827", "secondary": "#6B7280"}   â†“ Output: style.json``````

      },

      "contrastGuidelines": {   

        "minimumContrast": "7:1",

        "reasoning": "Presentations viewed at distance require higher contrast"5. /integrate

      }

    },   â†“ Merge contents + style + MCP exploration

    "typography": {

      "scale": {   â†“ Output: IntegrationPrompt.json### 2. Validation Rules### 2. Validation Rules

        "slideTitle": {"size": 44, "weight": "bold", "lineHeight": 1.2},

        "bodyText": {"size": 24, "weight": "regular", "lineHeight": 1.5}   

      },

      "readabilityGuidelines": {6. /generate (user chooses format)

        "minimumSize": "24pt for body text",

        "maximumLineLength": "10-12 words per line"   â†“ /html OR /html-tailwind OR /pptx

      }

    },   â†“ Output: Production files- **Required fields**: `sitePurpose`, `targetAudience`, `requiredFeatures`, `brandGuide`- **Required fields**: `sitePurpose`, `targetAudience`, `requiredFeatures`, `brandGuide`

    "layout": {

      "masters": [```

        {

          "id": "M1",- **Missing optional data**: Fill with `"AI-Default"` and notify user- **Missing optional data**: Fill with `"AI-Default"` and notify user

          "name": "title_slide",

          "structure": {### Partial Pipelines

            "titlePosition": "center",

            "layout": "centered",- **Invalid data**: Ask user for clarification, don't proceed- **Invalid data**: Ask user for clarification, don't proceed

            "imageArea": "full-bleed background"

          }**Analysis Only:**

        }

      ]```

    }

  }/contents â†’ /style â†’ Stop (outputs: contents.json, style.json)

}

``````### 3. MCP Integration (Live Site Exploration)### 3. MCP Integration (Live Site Exploration)



#### 03. Presentation Integration (`03_integrate_pptx.json`)

**Focus:** Complete slide-by-slide specifications with all details

**Direct Generation:**

**Key Outputs:**

- Every slide fully specified (layout, content, styling, timing)```

- Speaker notes for each slide

- Data visualizations with annotationsUser provides IntegrationPrompt.json â†’ /htmlWhen reference sites are provided, use **Kapture MCP** or **Browser MCP** to:When reference sites are provided, use **Kapture MCP** or **Browser MCP** to:

- Asset library (images, icons, logo)

- Delivery guidance (pacing, emphasis, adaptations)```

- Export specifications (PPTX, PDF, video)



#### 04. PPTX Generation (`04_generate_pptx.json`)

**Output:** Complete presentation specification ready for PowerPoint/Keynote creation---



---1. **Navigate** to the site and capture initial state1. **Navigate** to the site and capture initial state



## Common Principles## Instruction File Loading



### 1. Input Validation2. **Explore** key interactions (navigation, forms, modals, animations)2. **Explore** key interactions (navigation, forms, modals, animations)



**Required Fields:**When a command is detected:

- `outputType` (web or pptx)

- `sitePurpose` or `purpose`3. **Screenshot** at each interaction point3. **Screenshot** at each interaction point

- `targetAudience`

- `brandGuide` (at minimum: primaryColor, secondaryColor, fontFamily, tone)1. **Read** the corresponding instruction file from `instruction/` directory



**Optional Fields:**2. **Parse** the JSON schema and rules4. **Log** all evidence in the output JSON4. **Log** all evidence in the output JSON

- If missing: Insert `"AI-Default"` and notify user

- User can modify later3. **Apply** the instruction while maintaining context from this main guideline



### 2. MCP Integration (Site Exploration)4. **Execute** generation logic as specified in the instruction



When `referenceSites` provided, use **Kapture MCP** or **Browser MCP** to:5. **Save** output to the designated file



1. **Navigate** to reference sites6. **Report** completion with summary**Screenshot Naming Convention:****Screenshot Naming Convention:**

2. **Explore** interactions (navigation, forms, modals, animations)

3. **Screenshot** at every key moment

4. **Log** all evidence in output JSON

### Integration Rules``````

**Screenshot Naming:**

```

YYYYMMDD_HHMMSS_step-<nn>_route-<path>_<action>.png

```- Individual command outputs are **building blocks** for final deliverablesYYYYMMDD_HHMMSS_step-<nn>_route-<path>_<action>.pngYYYYMMDD_HHMMSS_step-<nn>_route-<path>_<action>.png



**Storage:**- Each instruction file should **complement**, not replace, common principles

```

./captures/- Maintain **consistency** in naming conventions and data structures``````

  â”œâ”€â”€ 20251107_143012_step-01_home_navigate.png

  â”œâ”€â”€ 20251107_143015_step-02_shop_click.png- **Preserve context** across multiple command executions

  â””â”€â”€ route-map.json

```



### 3. Image Handling---



**Default Policy:****Storage:****Storage:**

- When no images provided: Use `{ "src": "random", "ratio": "16:9" }`

- Uses picsum.photos for placeholders## File Structure

- Replace immediately when user provides actual images

``````

### 4. Accessibility

```

**Web (WCAG 2.1 AA minimum):**

- 4.5:1 contrast for text, 3:1 for UI componentsworkspace/./captures/./captures/

- Keyboard navigation for all interactions

- Alt text for all imagesâ”œâ”€â”€ .github/

- ARIA labels where needed

- Focus indicators visibleâ”‚   â””â”€â”€ copilot-instructions.md                â† This file (router + common rules)  â”œâ”€â”€ 20251107_143012_step-01_home_navigate.png  â”œâ”€â”€ 20251107_143012_step-01_home_navigate.png



**Presentation (WCAG AAA for large text):**â”œâ”€â”€ instruction/

- 7:1 contrast (higher for projection)

- Min 24pt body, 36pt titlesâ”‚   â”œâ”€â”€ analysis/                              â† Analysis & Integration  â”œâ”€â”€ 20251107_143015_step-02_works_click.png  â”œâ”€â”€ 20251107_143015_step-02_works_click.png

- Alt text for charts and images

- Don't rely on color aloneâ”‚   â”‚   â”œâ”€â”€ contents_system_instruction.json   â† Content analysis

- Reading order logical

â”‚   â”‚   â”œâ”€â”€ style_system_instruction.json      â† Visual/layout analysis  â””â”€â”€ route-map.json  â””â”€â”€ route-map.json

---

â”‚   â”‚   â””â”€â”€ integrate_system_instruction.json  â† Spec integration

## File Structure

â”‚   â”œâ”€â”€ web/                                   â† Web Development``````

```

workspace/â”‚   â”‚   â”œâ”€â”€ html_system_instruction.json       â† Semantic HTML (multi-file)

â”œâ”€â”€ .github/

â”‚   â””â”€â”€ copilot-instructions.md          â† This file (main router)â”‚   â”‚   â””â”€â”€ html_tailwind_instruction.json     â† Tailwind SPA (single-file)

â”œâ”€â”€ instruction/

â”‚   â”œâ”€â”€ web-pipeline/â”‚   â””â”€â”€ presentation/                          â† Presentations

â”‚   â”‚   â”œâ”€â”€ 01_contents_web.json         â† Web content analysis

â”‚   â”‚   â”œâ”€â”€ 02_style_web.json            â† Web design system extractionâ”‚       â””â”€â”€ pptx_system_instruction.json       â† PowerPoint spec### 4. Output Standards### 4. Output Standards

â”‚   â”‚   â”œâ”€â”€ 03_integrate_web.json        â† Web specification integration

â”‚   â”‚   â””â”€â”€ generators/â”œâ”€â”€ captures/                                  â† MCP screenshots

â”‚   â”‚       â”œâ”€â”€ 04_generate_html.json    â† Semantic HTML/CSS/JS generator

â”‚   â”‚       â””â”€â”€ 04_generate_tailwind.json â† Tailwind single-file generatorâ”œâ”€â”€ contents.json                              â† Content analysis output

â”‚   â””â”€â”€ presentation-pipeline/

â”‚       â”œâ”€â”€ 01_contents_pptx.json        â† Presentation content analysisâ”œâ”€â”€ style.json                                 â† Style analysis output

â”‚       â”œâ”€â”€ 02_style_pptx.json           â† Presentation design system

â”‚       â”œâ”€â”€ 03_integrate_pptx.json       â† Presentation spec integrationâ”œâ”€â”€ integrate.json                             â† Integrated spec outputAll outputs must be:All outputs must be:

â”‚       â””â”€â”€ generators/

â”‚           â””â”€â”€ 04_generate_pptx.json    â† Presentation generatorâ””â”€â”€ IntegrationPrompt.json                     â† Final developer spec

â”œâ”€â”€ captures/                             â† MCP screenshots

â”œâ”€â”€ web_contents.json                     â† Web pipeline outputs- âœ… **Valid JSON** (for specification files)- âœ… **Valid JSON** (for specification files)

â”œâ”€â”€ web_style.json

â”œâ”€â”€ WebDevSpec.json                       â† Final web specGenerated outputs (example):

â”œâ”€â”€ pptx_contents.json                    â† Presentation pipeline outputs

â”œâ”€â”€ pptx_style.jsonâ”œâ”€â”€ index.html- âœ… **Well-documented** (comments, README files)- âœ… **Well-documented** (comments, README files)

â””â”€â”€ PresentationSpec.json                 â† Final presentation spec

```â”œâ”€â”€ styles/



---â”‚   â”œâ”€â”€ main.css- âœ… **Production-ready** (no placeholders except images)- âœ… **Production-ready** (no placeholders except images)



## Execution Workflowâ”‚   â””â”€â”€ responsive.css



### Command Detectionâ”œâ”€â”€ scripts/- âœ… **Accessible** (WCAG 2.1 AA minimum)- âœ… **Accessible** (WCAG 2.1 AA minimum)



1. **User provides `/web`** â†’ Execute web pipelineâ”‚   â””â”€â”€ main.js

2. **User provides `/pptx`** â†’ Execute presentation pipeline

3. **No command but `outputType: "web"` in input** â†’ Execute web pipelineâ””â”€â”€ README.md- âœ… **Responsive** (mobile-first approach)- âœ… **Responsive** (mobile-first approach)

4. **No command but `outputType: "pptx"` in input** â†’ Execute presentation pipeline

5. **No command, no outputType** â†’ Ask user: "Web site or Presentation?"```



### Web Pipeline Execution



```---

/web [user input]

  â†“### 5. Image Handling### 5. Image Handling

01. Load 01_contents_web.json instruction

  â†“ Analyze web-specific content structure## Domain Organization

  â†“ OVERWRITE instruction/web-pipeline/01_contents_web.json

  â†“

02. Load 02_style_web.json instruction

  â†“ Extract responsive design system### ğŸ“Š Analysis (`instruction/analysis/`)

  â†“ OVERWRITE instruction/web-pipeline/02_style_web.json

  â†“**Purpose**: Analyze user requirements and reference sites to create structured specifications**Default Policy:****Default Policy:**

03. Load 03_integrate_web.json instruction

  â†“ Merge content + style

  â†“ OVERWRITE instruction/web-pipeline/03_integrate_web.json

  â†“- **Contents Analysis**: Extract content structure, messaging, and information architecture- When no specific images provided: Use `picsum.photos` random images- When no specific images provided: Use `picsum.photos` random images

04. Ask user: "Semantic HTML or Tailwind?"

  â†“- **Style Analysis**: Identify visual patterns, colors, typography, and layout from designs

  â”œâ”€â†’ Load 04_generate_html.json â†’ Multi-file HTML/CSS/JS

  â””â”€â†’ Load 04_generate_tailwind.json â†’ Single-file Tailwind app- **Integration**: Merge content and style specs into a unified development specification- Format: `{ "src": "random", "ratio": "16:9" }`- Format: `{ "src": "random", "ratio": "16:9" }`

```



### Presentation Pipeline Execution

### ğŸŒ Web (`instruction/web/`)- Replace immediately when user provides actual images- Replace immediately when user provides actual images

```

/pptx [user input]**Purpose**: Generate production-ready web code from specifications

  â†“

01. Load 01_contents_pptx.json instruction

  â†“ Analyze slide narrative and structure

  â†“ OVERWRITE instruction/presentation-pipeline/01_contents_pptx.json- **HTML (Semantic)**: Multi-file structure with semantic HTML5, modular CSS, vanilla JavaScript

  â†“

02. Load 02_style_pptx.json instruction- **HTML (Tailwind)**: Single-file SPA with Tailwind CSS v4, state management, modern utilities**Examples:****Examples:**

  â†“ Extract presentation design system

  â†“ OVERWRITE instruction/presentation-pipeline/02_style_pptx.json

  â†“

03. Load 03_integrate_pptx.json instruction### ğŸ“Š Presentation (`instruction/presentation/`)```html```html

  â†“ Create complete slide specifications

  â†“ OVERWRITE instruction/presentation-pipeline/03_integrate_pptx.json**Purpose**: Generate presentation specifications for business, portfolio, or pitch decks

  â†“

04. Load 04_generate_pptx.json instruction<!-- Placeholder --><!-- Placeholder -->

  â†“ Deliver PresentationSpec.json with usage guidance

```- **PPTX**: Slide-by-slide specification with layout, content, and design tokens



---<img src="https://picsum.photos/1920/1080?random=1" alt="Hero image"><img src="https://picsum.photos/1920/1080?random=1" alt="Hero image">



## Quality Checklist---



Before delivering any output:



### Web## Extension Guidelines

- [ ] All content mapped to responsive components

- [ ] Design tokens applied (no hard-coded values)<!-- User-provided --><!-- User-provided -->

- [ ] All interactive states documented (hover, focus, active, disabled)

- [ ] Responsive behavior specified for mobile, tablet, desktop### Adding a New Command

- [ ] Accessibility WCAG 2.1 AA met

- [ ] SEO metadata complete<img src="assets/images/hero.jpg" alt="Company headquarters"><img src="assets/images/hero.jpg" alt="Company headquarters">

- [ ] Performance optimizations specified

1. **Determine domain**: analysis / web / presentation / other

### Presentation

- [ ] One main point per slide2. **Create** `instruction/{domain}/new_command_instruction.json```````

- [ ] Max 6 lines of text per slide

- [ ] Typography readable (min 24pt body, 36pt titles)3. **Define** input requirements, output format, generation logic

- [ ] Contrast 7:1 for projection

- [ ] Speaker notes for each content slide4. **Add** command to the table in Command System section

- [ ] Timing realistic and engagement planned

- [ ] Alt text for all visuals5. **Update** domain README if applicable

- [ ] Clear call-to-action on closing slide

6. **Test** with sample inputs------

---

7. **Document** examples and quality checks

## Version History



- **v2.0.0** (2025-11-07): Complete restructure - separate pipelines from start, no shared analysis

- **v1.0.0** (2025-11-07): Initial modular architecture with shared analysis (deprecated)### Template Structure for New Instructions


## Pipeline Execution Flow## Pipeline Execution Flow

```json

{

  "systemName": "NewBuilder",

  "version": "1.0.0",### Full Pipeline (`/full`)### Full Pipeline (`/full`)

  "description": "What this instruction does",

  "trigger": "/new-command",

  "domain": "analysis|web|presentation",

  "inputRequired": ["list of required inputs"],``````

  "outputFormat": {

    "filename": "output.json",1. /collect1. /collect

    "structure": "description"

  },   â†“ Gather all user inputs   â†“ Gather all user inputs

  "buildPrinciples": {

    "principle1": "explanation",      

    "principle2": "explanation"

  },2. /validate2. /validate

  "generation": {

    "step1": "logic",   â†“ Check required fields, fill defaults   â†“ Check required fields, fill defaults

    "step2": "logic"

  },      

  "qualityChecks": [

    "âœ“ Check 1",3. /contents3. /contents

    "âœ“ Check 2"

  ],   â†“ Analyze requirements, structure content   â†“ Analyze requirements, structure content

  "examples": [],

  "notes": []   â†“ Output: contents.json   â†“ Output: contents.json

}

```      



---4. /style4. /style



## Quality Checklist   â†“ Extract visual patterns from images/references   â†“ Extract visual patterns from images/references



Before delivering any output:   â†“ Output: style.json   â†“ Output: style.json



- [ ] All required inputs collected and validated      

- [ ] Output files generated in correct format

- [ ] Code/spec follows relevant instruction guidelines5. /integrate5. /integrate

- [ ] Accessibility standards met (WCAG 2.1 AA)

- [ ] Responsive design implemented (mobile-first)   â†“ Merge contents + style + MCP exploration   â†“ Merge contents + style + MCP exploration

- [ ] Images handled correctly (placeholders or user-provided)

- [ ] Documentation included (README, comments)   â†“ Output: IntegrationPrompt.json   â†“ Output: IntegrationPrompt.json

- [ ] No placeholder data except images

- [ ] All links/references are valid      

- [ ] Console/validation errors resolved

6. /generate (user chooses format)6. /generate (user chooses format)

---

   â†“ /html OR /html-tailwind OR /pptx   â†“ /html OR /html-tailwind OR /pptx

## Version History

   â†“ Output: Production files   â†“ Output: Production files

- **v1.1.0** (2025-11-07): Reorganized into domain-based structure (analysis, web, presentation)

- **v1.0.0** (2025-11-07): Initial modular architecture with command routing system``````




### Partial Pipelines### Partial Pipelines



**Analysis Only:****Analysis Only:**

``````

/contents â†’ /style â†’ Stop (outputs: contents.json, style.json)/contents â†’ /style â†’ Stop (outputs: contents.json, style.json)

``````



**Direct Generation:****Direct Generation:**

``````

User provides IntegrationPrompt.json â†’ /htmlUser provides IntegrationPrompt.json â†’ /html

``````



------



## Instruction File Loading## Instruction File Loading



When a command is detected:When a command is detected:



1. **Read** the corresponding instruction file from `instruction/` directory1. **Read** the corresponding instruction file from `instruction/` directory

2. **Parse** the JSON schema and rules2. **Parse** the JSON schema and rules

3. **Apply** the instruction while maintaining context from this main guideline3. **Apply** the instruction while maintaining context from this main guideline

4. **Execute** generation logic as specified in the instruction4. **Execute** generation logic as specified in the instruction

5. **Save** output to the designated file5. **Save** output to the designated file

6. **Report** completion with summary6. **Report** completion with summary



### Integration Rules### Integration Rules



- Individual command outputs are **building blocks** for final deliverables- Individual command outputs are **building blocks** for final deliverables

- Each instruction file should **complement**, not replace, common principles- Each instruction file should **complement**, not replace, common principles

- Maintain **consistency** in naming conventions and data structures- Maintain **consistency** in naming conventions and data structures

- **Preserve context** across multiple command executions- **Preserve context** across multiple command executions



------



## File Structure## File Structure



``````

workspace/workspace/

â”œâ”€â”€ .github/â”œâ”€â”€ .github/

â”‚   â””â”€â”€ copilot-instructions.md          â† This file (router + common rules)â”‚   â””â”€â”€ copilot-instructions.md          â† This file (router + common rules)

â”œâ”€â”€ instruction/â”œâ”€â”€ instruction/

â”‚   â”œâ”€â”€ contents_system_instruction.json  â† Content analysis logicâ”‚   â”œâ”€â”€ contents_system_instruction.json  â† Content analysis logic

â”‚   â”œâ”€â”€ style_system_instruction.json     â† Visual analysis logicâ”‚   â”œâ”€â”€ style_system_instruction.json     â† Visual analysis logic

â”‚   â”œâ”€â”€ integrate_system_instruction.json â† Spec integration logicâ”‚   â”œâ”€â”€ integrate_system_instruction.json â† Spec integration logic

â”‚   â”œâ”€â”€ html_system_instruction.json      â† Semantic HTML generatorâ”‚   â”œâ”€â”€ html_system_instruction.json      â† Semantic HTML generator

â”‚   â”œâ”€â”€ html_tailwind_instruction.json    â† Tailwind SPA generatorâ”‚   â”œâ”€â”€ html_tailwind_instruction.json    â† Tailwind SPA generator

â”‚   â””â”€â”€ pptx_system_instruction.json      â† PowerPoint spec generatorâ”‚   â””â”€â”€ pptx_system_instruction.json      â† PowerPoint spec generator

â”œâ”€â”€ captures/                             â† MCP screenshotsâ”œâ”€â”€ captures/                             â† MCP screenshots

â”œâ”€â”€ contents.json                         â† Content analysis outputâ”œâ”€â”€ contents.json                         â† Content analysis output

â”œâ”€â”€ style.json                            â† Style analysis outputâ”œâ”€â”€ style.json                            â† Style analysis output

â”œâ”€â”€ integrate.json                        â† Integrated spec outputâ”œâ”€â”€ integrate.json                        â† Integrated spec output

â””â”€â”€ IntegrationPrompt.json                â† Final developer specâ””â”€â”€ IntegrationPrompt.json                â† Final developer spec



Generated outputs (example):Generated outputs (example):

â”œâ”€â”€ index.htmlâ”œâ”€â”€ index.html

â”œâ”€â”€ styles/â”œâ”€â”€ styles/

â”‚   â”œâ”€â”€ main.cssâ”‚   â”œâ”€â”€ main.css

â”‚   â””â”€â”€ responsive.cssâ”‚   â””â”€â”€ responsive.css

â”œâ”€â”€ scripts/â”œâ”€â”€ scripts/

â”‚   â””â”€â”€ main.jsâ”‚   â””â”€â”€ main.js

â””â”€â”€ README.mdâ””â”€â”€ README.md

``````



------



## Extension Guidelines## Extension Guidelines



### Adding a New Command### Adding a New Command



1. **Create** `instruction/new_command_instruction.json`1. **Create** `instruction/new_command_instruction.json`

2. **Define** input requirements, output format, generation logic2. **Define** input requirements, output format, generation logic

3. **Add** command to the table in Command System section3. **Add** command to the table in Command System section

4. **Test** with sample inputs4. **Test** with sample inputs

5. **Document** examples and quality checks5. **Document** examples and quality checks



### Template Structure for New Instructions### Template Structure for New Instructions



```json```json

{{

  "systemName": "NewBuilder",  "systemName": "NewBuilder",

  "version": "1.0.0",  "version": "1.0.0",

  "description": "What this instruction does",  "description": "What this instruction does",

  "trigger": "/new-command",  "trigger": "/new-command",

  "inputRequired": ["list of required inputs"],  "inputRequired": ["list of required inputs"],

  "outputFormat": {  "outputFormat": {

    "filename": "output.json",    "filename": "output.json",

    "structure": "description"    "structure": "description"

  },  },

  "buildPrinciples": {  "buildPrinciples": {

    "principle1": "explanation",    "principle1": "explanation",

    "principle2": "explanation"    "principle2": "explanation"

  },  },

  "generation": {  "generation": {

    "step1": "logic",    "step1": "logic",

    "step2": "logic"    "step2": "logic"

  },  },

  "qualityChecks": [  "qualityChecks": [

    "âœ“ Check 1",    "âœ“ Check 1",

    "âœ“ Check 2"    "âœ“ Check 2"

  ],  ],

  "examples": [],  "examples": [],

  "notes": []  "notes": []

}}

``````



------



## Quality Checklist## Quality Checklist



Before delivering any output:Before delivering any output:



- [ ] All required inputs collected and validated- [ ] All required inputs collected and validated

- [ ] Output files generated in correct format- [ ] Output files generated in correct format

- [ ] Code/spec follows relevant instruction guidelines- [ ] Code/spec follows relevant instruction guidelines

- [ ] Accessibility standards met (WCAG 2.1 AA)- [ ] Accessibility standards met (WCAG 2.1 AA)

- [ ] Responsive design implemented (mobile-first)- [ ] Responsive design implemented (mobile-first)

- [ ] Images handled correctly (placeholders or user-provided)- [ ] Images handled correctly (placeholders or user-provided)

- [ ] Documentation included (README, comments)- [ ] Documentation included (README, comments)

- [ ] No placeholder data except images- [ ] No placeholder data except images

- [ ] All links/references are valid- [ ] All links/references are valid

- [ ] Console/validation errors resolved- [ ] Console/validation errors resolved



------



## Version History## Version History



- **v1.0.0** (2025-11-07): Initial modular architecture with command routing system- **v1.0.0** (2025-11-07): Initial modular architecture with command routing system



<!-- end list -->

```json
"userInput": {
  "sitePurpose": "Personal Portfolio",
  "targetAudience": {
    "country": "Global",
    "interests": ["Work Showcase", "Career Introduction"]
  },
  "requiredFeatures": ["contactForm", "shoppingCart"],
  "brandGuide": {
    "primaryColor": "#111111",
    "secondaryColor": "#e0e0e0",
    "accentColor": "AI-Default",
    "fontFamily": "Pretendard",
    "tone": ["Simple", "Modern", "Professional"]
  },
  "referenceSites": ["site1.com", "site2.com"],
  "specialRequests": ["Split scroll gallery", "Typography emphasis"]
}
```

---

## 2\. Request Analysis (`requestAnalysis`)

> **Objective**: To structure user input with **measurable evidence** to directly inform planning, design, and development decisions.

```json
"requestAnalysis": {
  "goals": {
    "primary": "Increase portfolio views",
    "secondary": ["Generate inquiries", "Establish brand tone"]
  },
  "audienceInsights": {
    "personas": [
      {"name": "HR Manager", "needs": ["Quick scan", "Trust"], "devices": ["Desktop"]},
      {"name": "Collaboration Partner", "needs": ["Work scope/role"], "devices": ["Mobile","Tablet"]}
    ]
  },
  "requirementsMapping": {
    "requiredFeaturesâ†’components": {
      "contactForm": ["Form", "Validation", "Mailer"],
      "shoppingCart": ["CartIcon", "MiniCart", "CheckoutCTA"]
    },
    "brandGuideâ†’tokens": ["colors", "typography", "spacing", "shadows"]
  },
  "contentInventory": {
    "pages": ["Home","About","Works","Contact"],
    "blocks": ["Hero","USP","Gallery","Testimonials","FAQ"]
  },
  "layoutHypotheses": [
    "Hero uses Split Grid, CTA priority",
    "Works uses Masonry + Lazyload"
  ],
  "seoIntent": {
    "keywords": ["portfolio", "frontend developer", "case study"],
    "metaStrategy": ["OG, Twitter Card", "Schema.org Person/WebSite"]
  }
}
```

**Generation Rules**

- Each subsection should present at least two specific points where possible.
- Mappings and hypotheses should be detailed down to the **component, token, and interaction level**.

---

## 3\. Visual Analysis (`visualAnalysis`)

When `imageAssets` are provided, structure the visual cues.

```json
"visualAnalysis": {
  "dominantColors": {
    "primary": ["#0d0d0d", "#1a1a1a"],
    "secondary": ["#f5f5f5", "#ffffff"],
    "accent": ["#ff6b6b", "#4ecdc4"]
  },
  "colorMood": "Monotone-based Minimalism",
  "fontHints": {
    "headings": ["sans-serif", "bold", "48-72px"],
    "body": ["sans-serif", "regular", "16-18px"],
    "special": ["serif", "italic", "Decorative"]
  },
  "styleKeywords": ["Minimal", "Use of Whitespace", "Typography-centric", "Grid-based"],
  "layoutPatterns": ["Asymmetrical Grid", "Full-bleed Images", "Overlapping Elements"],
  "textureAndEffects": ["Grain", "Blur", "Gradient Overlay"]
}
```

---

## 4\. Layout Benchmarking (`layoutAnalysis`)

When `referenceSites` are provided, **technically document** their structure, transitions, and interactions.

```json
"layoutAnalysis": {
  "structuralPatterns": {
    "header": {
      "type": "sticky-transparent",
      "height": "80px",
      "behavior": "Background color changes on scroll"
    },
    "navigation": {
      "desktop": "horizontal-centered",
      "mobile": "hamburger-fullscreen",
      "items": 5
    },
    "contentFlow": "single-column-varied-width"
  },
  "sectionTypes": [
    {"name":"hero","layout":"fullscreen-split","gridColumns":"7fr 5fr","contentAlignment":"vertical-center"},
    {"name":"portfolio","layout":"masonry-grid","columns":"3-2-1","gap":"2rem"}
  ],
  "microInteractions": ["hover-parallax-tilt","magnetic-cursor","smooth-scroll-snap"],
  "transitionPatterns": ["fade-up-stagger","clip-path-reveal","scale-in-viewport"]
}
```

---

## 5\. Developer JSON Composition (`devPromptJSON`)

**Default Image Policy**

- When no specific images are provided, use random images by default.
- **Default provider**: `picsum.photos`
- Image slots in sections/cards should use the format: `{ "src":"random", "ratio":"16:9" }`
- If the user provides actual images, they will be **replaced immediately**.

<!-- end list -->

```json
"devPromptJSON": {
  "globalSettings": {
    "containerWidth": "1440px",
    "gridSystem": {
      "columns": 12,
      "gutter": "2rem",
      "margin": "4rem"
    },
    "breakpoints": {
      "mobile": "320px",
      "tablet": "768px",
      "desktop": "1024px",
      "wide": "1440px"
    },
    "baseTypography": {
      "scale": "1.25",
      "baseSize": "16px",
      "lineHeight": "1.6"
    }
  },

  "pages": [
    {
      "path": "index.html",
      "title": "Home",
      "meta": {
        "description": "Personal Portfolio",
        "keywords": ["Design", "Development", "Portfolio"]
      },
      "sections": [
        {
          "id": "hero",
          "type": "fullscreen-hero",
          "layout": {
            "display": "grid",
            "gridTemplate": "1fr / 1fr 1fr",
            "minHeight": "100vh",
            "padding": "0"
          },
          "content": {
            "left": {
              "type": "text-block",
              "elements": ["h1", "p", "cta-button"],
              "alignment": "center-left",
              "maxWidth": "600px"
            },
            "right": {
              "type": "image-container",
              "effect": "parallax-slow",
              "overflow": "hidden"
            }
          },
          "styles": {
            "background": "linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%)",
            "color": "#111111",
            "typography": {
              "h1": {
                "fontSize": "clamp(3rem, 6vw, 5rem)",
                "fontWeight": "700",
                "lineHeight": "1.1",
                "letterSpacing": "-0.02em"
              }
            }
          },
          "animations": {
            "onLoad": "fade-in-up",
            "onScroll": "parallax-y",
            "hover": "scale-105"
          },
          "responsive": {
            "tablet": {
              "gridTemplate": "1fr / 1fr",
              "content": "stack-vertical"
            }
          }
        },
        {
          "id": "about",
          "type": "content-section",
          "layout": {
            "display": "grid",
            "gridTemplate": "1fr / 2fr 3fr",
            "gap": "4rem",
            "padding": "8rem 0"
          },
          "content": {
            "sidebar": {
              "elements": ["section-number", "section-title"],
              "position": "sticky",
              "top": "120px"
            },
            "main": {
              "elements": ["paragraph", "highlight-quote", "skill-grid"],
              "maxWidth": "800px"
            }
          },
          "components": {
            "skillGrid": {
              "display": "grid",
              "columns": "repeat(auto-fit, minmax(150px, 1fr))",
              "gap": "1rem",
              "itemStyle": {
                "padding": "1.5rem",
                "border": "1px solid #e0e0e0",
                "borderRadius": "8px",
                "transition": "all 0.3s ease"
              }
            }
          }
        },
        {
          "id": "works",
          "type": "portfolio-gallery",
          "layout": {
            "type": "split-scroll",
            "behavior": "pin-left-scroll-right"
          },
          "content": {
            "left": {
              "type": "project-info",
              "position": "fixed",
              "elements": ["project-number", "project-title", "project-description", "tech-stack"]
            },
            "right": {
              "type": "image-gallery",
              "scroll": "vertical",
              "imageRatio": "16:9",
              "gap": "2rem"
            }
          },
          "interactions": {
            "scrollTrigger": "update-left-content",
            "imageHover": "zoom-pan",
            "transition": "smooth-snap"
          }
        },
        {
          "id": "contact",
          "type": "contact-form",
          "layout": {
            "maxWidth": "600px",
            "margin": "0 auto",
            "padding": "8rem 0"
          },
          "formElements": [
            {
              "type": "input",
              "name": "name",
              "validation": "required",
              "style": {
                "width": "100%",
                "padding": "1rem",
                "border": "none",
                "borderBottom": "2px solid #111",
                "fontSize": "1rem",
                "transition": "border-color 0.3s"
              }
            },
            {
              "type": "textarea",
              "name": "message",
              "rows": 5,
              "style": {
                "resize": "vertical",
                "minHeight": "120px"
              }
            },
            {
              "type": "submit",
              "text": "Submit",
              "style": {
                "padding": "1rem 3rem",
                "background": "#111",
                "color": "#fff",
                "border": "none",
                "cursor": "pointer",
                "transition": "transform 0.2s",
                "hoverTransform": "translateY(-2px)"
              }
            }
          ],
          "validation": {
            "type": "realtime",
            "errorStyle": {
              "color": "#ff6b6b",
              "fontSize": "0.875rem",
              "marginTop": "0.5rem"
            }
          }
        }
      ]
    }
  ],

  "components": {
    "header": {
      "type": "sticky-transform",
      "height": { "initial": "100px", "scrolled": "70px" },
      "background": { "initial": "transparent", "scrolled": "rgba(255, 255, 255, 0.95)" },
      "backdropFilter": "blur(10px)",
      "transition": "all 0.3s ease",
      "logo": { "type": "text", "fontSize": "1.5rem", "fontWeight": "700" },
      "navigation": {
        "desktop": {
          "display": "flex",
          "gap": "2rem",
          "itemStyle": {
            "position": "relative",
            "padding": "0.5rem 0",
            "afterContent": "underline-grow"
          }
        },
        "mobile": {
          "trigger": "hamburger",
          "menu": "fullscreen-overlay",
          "animation": "slide-from-right"
        }
      }
    },
    "footer": {
      "layout": "3-column-responsive",
      "padding": "4rem 0 2rem",
      "borderTop": "1px solid #e0e0e0",
      "content": {
        "column1": ["logo", "copyright"],
        "column2": ["nav-links"],
        "column3": ["social-links"]
      }
    }
  },

  "assets": {
    "colors": {
      "primary": "#111111",
      "secondary": "#e0e0e0",
      "accent": "#ff6b6b",
      "background": "#ffffff",
      "surface": "#f5f5f5",
      "text": {
        "primary": "#111111",
        "secondary": "#666666",
        "disabled": "#999999"
      },
      "states": {
        "hover": "rgba(17, 17, 17, 0.08)",
        "focus": "rgba(17, 17, 17, 0.12)",
        "selected": "rgba(17, 17, 17, 0.16)"
      }
    },
    "typography": {
      "fontStack": {
        "heading": "'Pretendard'",
        "body": "Inter, sans-serif",
        "mono": "'JetBrains Mono', monospace"
      },
      "sizes": {
        "h1": "clamp(2.5rem, 5vw, 4rem)",
        "h2": "clamp(2rem, 4vw, 3rem)",
        "h3": "clamp(1.5rem, 3vw, 2rem)",
        "body": "1rem",
        "small": "0.875rem"
      },
      "weights": { "regular": 400, "medium": 500, "bold": 700 }
    },
    "spacing": {
      "unit": "0.5rem",
      "scale": [0, 0.5, 1, 1.5, 2, 3, 4, 6, 8, 12, 16],
      "sections": { "mobile": "4rem", "tablet": "6rem", "desktop": "8rem" }
    },
    "shadows": {
      "small": "0 2px 4px rgba(0,0,0,0.08)",
      "medium": "0 4px 16px rgba(0,0,0,0.12)",
      "large": "0 8px 32px rgba(0,0,0,0.16)",
      "hover": "0 12px 48px rgba(0,0,0,0.2)"
    },
    "transitions": {
      "fast": "150ms ease",
      "base": "300ms ease",
      "slow": "500ms ease",
      "bezier": {
        "easeOutExpo": "cubic-bezier(0.19, 1, 0.22, 1)",
        "easeInOutQuart": "cubic-bezier(0.77, 0, 0.175, 1)"
      }
    }
  },

  "features": {
    "darkMode": {
      "toggle": "header-switch",
      "storage": "localStorage",
      "transition": "smooth-fade",
      "colorOverrides": {
        "background": "#0d0d0d",
        "surface": "#1a1a1a",
        "text.primary": "#ffffff"
      }
    },
    "seo": {
      "structured-data": true,
      "openGraph": true,
      "twitterCard": "summary_large_image",
      "sitemap": true,
      "robots": "index,follow"
    }
  },

  "interactions": {
    "scrollAnimations": [
      {
        "trigger": ".fade-in-up",
        "animation": "translateY(40px) to translateY(0)",
        "opacity": "0 to 1",
        "duration": "800ms",
        "delay": "stagger(100ms)",
        "easing": "easeOutExpo"
      },
      {
        "trigger": ".parallax-element",
        "animation": "translateY calculation based on scroll",
        "speed": 0.5,
        "bounds": "parent-container"
      }
    ],
    "hoverEffects": [
      {
        "selector": ".project-card",
        "scale": 1.02,
        "shadow": "elevate",
        "imageZoom": 1.1,
        "contentSlide": "up 20px"
      }
    ],
    "pageTransitions": {
      "type": "smooth-fade",
      "duration": "600ms",
      "loader": "progress-bar"
    },
    "microInteractions": [
      "magnetic-buttons",
      "ripple-effect",
      "tooltip-follow",
      "form-field-float-label"
    ]
  },

  "responsive": {
    "strategy": "mobile-first",
    "breakpointBehavior": {
      "mobile": {
        "navigation": "hamburger",
        "layout": "single-column",
        "typography": "scale-down-20%",
        "spacing": "reduce-50%"
      },
      "tablet": {
        "navigation": "horizontal-scroll",
        "layout": "two-column-adaptive",
        "images": "maintain-ratio"
      },
      "desktop": {
        "navigation": "full-horizontal",
        "layout": "multi-column-grid",
        "interactions": "enable-all"
      }
    },
    "imageOptimization": {
      "formats": ["webp", "jpg"],
      "sizes": ["320w", "768w", "1024w", "1440w", "2x"],
      "artDirection": true
    }
  },

  "codePatterns": {
    "cssArchitecture": "BEM-modified",
    "stateManagement": "pubsub-pattern"
  },

  "integrationArtifacts": {
    "explorationLog": "IntegrationPrompt.json",
    "strategy": "dom-based-analysis",
    "viewports": ["mobile-375x812", "tablet-768x1024", "desktop-1440x900"],
    "interactionChecklist": [
      "Header nav (desktop/mobile)",
      "Hero CTAs",
      "Tabs/Accordions",
      "Modals/Drawers",
      "Infinite scroll/Lazyload",
      "Form validation & errors (UI only)",
      "Hover effects & transitions",
      "Responsive breakpoint changes",
      "Scroll animations & parallax",
      "Theme/Lang toggles",
      "404/500 fallbacks"
    ]
  },

  "notes": [
    "By default, all image slots display a random image.",
    "Use a mix of CSS Grid and Flexbox for layout construction.",
    "Build the theme system with Custom Properties (CSS Variables).",
    "Clarify document structure with semantic HTML5 tags.",
    "All exploration uses DOM/Elements API - no screenshot storage.",
    "State comparisons performed in memory for each interaction."
  ]
}
```

---

## 6\. Final Output Format

> **Filename:** `IntegrationPrompt.json` > **Description:** The final output must be generated in the JSON structure below, with DOM-based exploration, state comparisons, and interaction evidence recorded in the `integration` section.

```json
{
  "userInput": {},
  "requestAnalysis": {},
  "visualAnalysis": {},
  "layoutAnalysis": {},
  "devPromptJSON": {},
  "integration": {
    "mcp": {
      "runtime": "mcp_kapture",
      "strategy": "dom-based-analysis",
      "viewports": {
        "mobile": { "width": 375, "height": 812 },
        "tablet": { "width": 768, "height": 1024 },
        "desktop": { "width": 1440, "height": 900 }
      }
    },
    "exploration": {
      "entryUrl": "https://example.com",
      "depth": 3,
      "totalViewports": 3,
      "totalRoutes": 5,
      "totalInteractions": 47,
      "routeMap": [
        { "path": "/", "status": 200, "title": "Home", "sections": ["hero", "features", "cta"] },
        { "path": "/works", "status": 200, "title": "Works", "sections": ["gallery", "filters"] },
        { "path": "/about", "status": 200, "title": "About", "sections": ["team", "history"] }
      ],
      "events": [
        {
          "step": 1,
          "viewport": "mobile",
          "action": "resize",
          "target": { "width": 375, "height": 812 },
          "result": { "success": true }
        },
        {
          "step": 2,
          "viewport": "mobile",
          "action": "dom-snapshot",
          "result": {
            "elements": 247,
            "interactiveElements": 23,
            "forms": 1
          }
        },
        {
          "step": 3,
          "viewport": "mobile",
          "action": "scroll",
          "scrollPosition": { "pixels": 800, "percentage": 25 },
          "detectedChanges": [
            {
              "element": ".hero-section",
              "changeType": "css-class-added",
              "detail": "fade-in-up animation triggered"
            },
            {
              "element": "header",
              "changeType": "style-change",
              "detail": "background: transparent â†’ rgba(255,255,255,0.95)"
            }
          ]
        },
        {
          "step": 4,
          "viewport": "mobile",
          "action": "hover",
          "target": { "selector": ".card-item", "element": "Portfolio Card" },
          "beforeState": {
            "transform": "none",
            "boxShadow": "none"
          },
          "afterState": {
            "transform": "translateY(-8px)",
            "boxShadow": "0 8px 24px rgba(0,0,0,0.12)"
          },
          "detectedChanges": {
            "visual": ["elevation-increase", "subtle-scale"],
            "animation": "css-transition-300ms"
          }
        },
        {
          "step": 5,
          "viewport": "mobile",
          "action": "click",
          "target": { "selector": "button.menu-toggle", "element": "Hamburger Menu" },
          "result": {
            "modalOpened": true,
            "newElements": ["nav-overlay", "nav-menu-mobile"],
            "domMutation": "overlay added to body"
          }
        },
        {
          "step": 6,
          "viewport": "mobile",
          "action": "click",
          "target": { "selector": "a[href='/works']", "element": "Works Navigation Link" },
          "result": {
            "routeChanged": true,
            "newUrl": "https://example.com/works",
            "newTitle": "Works",
            "domStructure": "completely-different"
          }
        }
      ]
    },
    "evidence": {
      "viewportComparison": {
        "mobile": {
          "navigation": "hamburger-menu",
          "gridColumns": 1,
          "hiddenElements": [".desktop-only-banner"],
          "typographyScale": "base"
        },
        "tablet": {
          "navigation": "horizontal-collapsed",
          "gridColumns": 2,
          "hiddenElements": [],
          "typographyScale": "110%"
        },
        "desktop": {
          "navigation": "horizontal-full",
          "gridColumns": 3,
          "hiddenElements": [],
          "typographyScale": "120%"
        }
      },
      "stateComparisons": [
        {
          "interaction": "hover-on-card",
          "viewport": "desktop",
          "before": { "transform": "none", "opacity": "1" },
          "after": { "transform": "translateY(-8px) scale(1.02)", "opacity": "0.95" },
          "animationType": "css-transition",
          "duration": "300ms"
        },
        {
          "interaction": "modal-open",
          "viewport": "mobile",
          "before": { "display": "none", "visibility": "hidden" },
          "after": { "display": "flex", "visibility": "visible", "opacity": "1" },
          "animationType": "fade-in-scale",
          "duration": "200ms"
        }
      ],
      "animations": [
        {
          "type": "scroll-triggered",
          "element": ".section-title",
          "trigger": { "scrollPercentage": 25 },
          "effect": { "opacity": "0â†’1", "transform": "translateY(40px)â†’translateY(0)" }
        },
        {
          "type": "hover",
          "element": ".cta-button",
          "effect": { "scale": "1â†’1.05", "boxShadow": "smallâ†’large" }
        },
        {
          "type": "click",
          "element": ".tab-trigger",
          "effect": { "contentSwitch": true, "underlineSlide": "leftâ†’right" }
        }
      ],
      "responsivePatterns": [
        {
          "breakpoint": "768px",
          "changes": ["grid: 1colâ†’2col", "nav: hamburgerâ†’horizontal", "font: 16pxâ†’18px"]
        },
        {
          "breakpoint": "1024px",
          "changes": ["grid: 2colâ†’3col", "sidebar: hiddenâ†’visible", "font: 18pxâ†’20px"]
        }
      ],
      "accessibility": {
        "issues": [
          { "type": "missing-alt", "element": "img.hero-image", "severity": "error" },
          { "type": "low-contrast", "element": ".secondary-text", "ratio": "3.2:1", "severity": "warning" }
        ],
        "passed": ["keyboard-navigation", "aria-labels-present", "semantic-html"]
      },
      "seo": {
        "issues": [
          { "type": "missing-meta-description", "page": "/works" }
        ],
        "passed": ["h1-present", "og-tags", "structured-data"]
      },
      "performance": {
        "domElements": { "mobile": 247, "tablet": 312, "desktop": 389 },
        "interactiveElements": { "mobile": 23, "tablet": 31, "desktop": 42 },
        "estimatedTTI": "< 2s",
        "estimatedLCP": "< 2.5s"
      }
    }
  }
}
```

---

## 7\. Execution Workflow

### Command-Based Execution

#### Individual Commands:
- **`/contents [user_input]`** â†’ Execute ContentAnalyzer â†’ Generate `contents.json`
- **`/style [image_assets] [reference_sites]`** â†’ Execute VisualLayoutAnalyzer â†’ Generate `style.json`  
- **`/integrate`** â†’ Execute DeveloperJSONComposer (requires contents.json + style.json) â†’ Generate `integrate.json`

#### Full Pipeline (`/full` or no command):
- **/collect** â†’ Structure `userInput`
- **/validate** â†’ Validate requirements, auto-populate optional values (`"AI-Default"`)
- **/analyze-request** â†’ Generate `requestAnalysis` (including quantitative evidence)
- **/analyze-visual** â†’ Extract visual/style cues from images
- **/analyze-layout** â†’ Analyze reference structure/transitions
- **/explore-pages (MCP)** â†’ Conduct live page exploration with `mcp_servers.browsermcp`
  - **Create a route map** (BFS from root to child paths, with max depth setting)
  - **Execute interactions** on buttons, links, tabs, accordions, modals, etc.
  - **Progressive scroll capture** (5% increments, animation detection, milestone verification)
  - **Capture a screenshot at every key moment** (immediately after DOM change, route change, visible update, or animation trigger)
- **/compose-json** â†’ Compose the integrated `devPromptJSON` + `integration`
- **/generate-web** â†’ Generate single-file Tailwind CSS v4 application (Fixed Output Format)
  - **All components receive unique IDs** for easy post-generation editing
  - Output: `output/web/index.html`
- **/deliver** â†’ Deliver final web application with documentation

### File Dependencies
- `contents.json` â† Generated by `/contents` command
- `style.json` â† Generated by `/style` command  
- `integrate.json` â† Generated by `/integrate` command (depends on contents.json + style.json)
- `IntegrationPrompt.json` â† Final integrated output from full pipeline

---

## 8\. Advanced Guidelines

### 8.1 Detailed CSS Properties

- **Color Systems**: Use a mix of HEX/RGB/HSL.
- **Unit Mixing**: Use `rem`, `em`, `px`, `vw`, and `vh`.
- **Explicit Properties**: Clearly specify Grid and Flexbox property values.
- **Advanced Effects**: Include `transform`, `filter`, `mix-blend-mode`, etc.

### 8.2 Component-Based Thinking

- Isolate reusable components, define their states (default, hover, active, disabled), and design their variants and props.

### 8.3 Detailed Interaction Breakdown

- Quantify triggers, timing, and easing functions.
- Quantify the scroll timeline with specific values.
- Prioritize mobile gestures.

### 8.4 Component ID Requirements

**âš ï¸ CRITICAL: Every component must have a unique ID for maintainability**

- **Purpose**: Enable easy post-generation editing and selective updates
- **Format**: `{section}-{type}-{identifier}` (lowercase-hyphen)
- **Examples**:
  - Sections: `hero-section-main`, `about-section`, `works-section`
  - Cards: `about-card-01`, `about-card-02`, `works-gallery-item-03`
  - Buttons: `hero-cta-primary`, `contact-form-submit`, `nav-menu-toggle`
  - Images: `hero-img-main`, `about-img-team`, `works-img-01`
  - Forms: `contact-form-main`, `newsletter-form-footer`
  - Modals: `modal-contact`, `modal-gallery-lightbox`

**Mandatory ID Assignment Rules**:
1. All `<section>` elements â†’ `{name}-section`
2. All list items (cards, gallery items) â†’ `{type}-{sequential-number}`
3. All interactive elements (buttons, links, inputs) â†’ descriptive IDs
4. All images â†’ `{context}-img-{number}`
5. All forms â†’ `{purpose}-form`
6. All modals/overlays â†’ `modal-{purpose}`

### 8.5 Random Image Default

- **Always** use random images when specific ones are not provided.
- **Format**: `{ "src":"random", "ratio":"16:9" }`
- Replace immediately when the user provides actual images.

---

## 9\. MCP-Based Page Exploration & Evidence Logging

### 9.1 MCP Runtime

- **Browser Exploration Engine:** `mcp_servers.browsermcp`
- **Configuration Hint (Example):**

<!-- end list -->

```json
{
  "mcpServers": {
    "browsermcp": {
      "command": "npx",
      "args": ["@browsermcp/mcp@latest"]
    }
  }
}
```

### 9.2 Exploration Principles

**âš ï¸ CRITICAL: DO NOT SKIP ANY STEPS. EACH PAGE MUST BE FULLY EXPLORED.**

#### 9.2.1 Mandatory Exploration Checklist (Per Page)

**YOU MUST COMPLETE ALL ITEMS BELOW FOR EACH PAGE. NO SHORTCUTS.**

- [ ] **Full Page Scroll (REQUIRED)**
  - âœ… Scroll from 0% to 100% of page height
  - âœ… Capture at ALL 21 positions: 0%, 5%, 10%, 15%, 20%, 25%, 30%, 35%, 40%, 45%, 50%, 55%, 60%, 65%, 70%, 75%, 80%, 85%, 90%, 95%, 100%
  - âœ… Minimum 21 scroll screenshots per page (one per position)
  - âœ… Document total page height in pixels
  - âœ… Verify bottom of page reached (footer visible)
  - âœ… Analyze EVERY position before moving to next
  - âœ… Test interactions at EVERY visible position

- [ ] **Navigation Exploration (REQUIRED)**
  - âœ… Test ALL header menu items (desktop view)
  - âœ… Test mobile hamburger menu (if responsive)
  - âœ… Test ALL footer links
  - âœ… Document menu structure and hierarchy
  - âœ… Capture screenshots: menu closed, menu open, each submenu

- [ ] **Interactive Elements (REQUIRED)**
  - âœ… Click ALL buttons and CTAs on the page
  - âœ… Test ALL tabs/accordions (capture each state)
  - âœ… Open ALL modals/drawers (capture open + close states)
  - âœ… Test ALL carousels/sliders (capture multiple slides)
  - âœ… Hover over cards/images (capture hover states if visible)

- [ ] **Form Testing (IF FORMS EXIST)**
  - âœ… Interact with EVERY input field
  - âœ… Test form validation (empty submit â†’ error state)
  - âœ… Test success state (if possible without actual submission)
  - âœ… Capture: initial, error, success states

- [ ] **Special Features (IF PRESENT)**
  - âœ… Theme/dark mode toggle
  - âœ… Language switcher
  - âœ… Search functionality
  - âœ… Infinite scroll (capture first 3 load events)
  - âœ… Video/audio players

- [ ] **Route Traversal**
  - âœ… Use **BFS** to explore links in menu, footer, and body content
  - âœ… Default max depth=3 (adjustable per context)
  - âœ… Document complete route map with all discovered paths

- [ ] **Accessibility/SEO Verification**
  - âœ… Check alt text on ALL images
  - âœ… Verify focus management (tab through interactive elements)
  - âœ… Check meta tags (title, description, OG tags)
  - âœ… Verify semantic HTML structure

#### 9.2.2 Completion Criteria

**âš ï¸ YOU CANNOT PROCEED TO NEXT STEP UNLESS:**

1. âœ… **Minimum Screenshots Per Page**: 10+ screenshots (5 scroll + 5 interactions minimum)
2. âœ… **Full Scroll Verification**: Bottom of page captured with footer visible
3. âœ… **All Interactive Elements Tested**: Every button, link, tab, accordion, modal documented
4. âœ… **Route Map Complete**: All discoverable routes mapped and logged
5. âœ… **Evidence Logged**: Every screenshot has corresponding JSON entry in `integration.exploration.events`

**If any checkbox is unchecked, exploration is INCOMPLETE.**

#### 9.2.3 Multi-Route Analysis for Single-Page Integration

**âš ï¸ CRITICAL: Explore ALL routes, but integrate into ONE single-page HTML.**

**Analysis Strategy:**

1. **Explore Multiple Routes (depth=1 minimum)**
   - âœ… Analyze Home (/) - Hero, Features, USP sections
   - âœ… Analyze /about - Team, History, Values sections
   - âœ… Analyze /works or /portfolio - Project galleries, case studies
   - âœ… Analyze /contact - Contact forms, location, social links
   - âœ… Each route must undergo FULL exploration (scroll + interactions)

2. **Extract Content by Section (not by page)**
   - Each route contains **multiple content sections**
   - Identify: Hero, Features, Gallery, Team, Testimonials, CTA, Contact, etc.
   - Document section-level design patterns, not page-level
   - Capture section transitions and scroll animations

3. **Integration into Single-Page Output**
   - Combine all analyzed sections into one scrollable HTML
   - Maintain visual hierarchy and flow
   - Add smooth scroll navigation between sections
   - Example flow: Hero â†’ Features â†’ Works â†’ About â†’ Contact
   - Preserve design consistency across sections from different routes

**Output Structure:**
```json
{
  "singlePageSections": [
    {
      "id": "hero",
      "sourceRoute": "/",
      "sectionType": "hero",
      "orderIndex": 1,
      "content": {
        "title": "...",
        "subtitle": "...",
        "cta": "..."
      },
      "design": {
        "layout": "fullscreen-split",
        "background": "gradient",
        "animations": ["fade-in-up"]
      }
    },
    {
      "id": "works",
      "sourceRoute": "/works",
      "sectionType": "portfolio-gallery",
      "orderIndex": 2,
      "content": {
        "projects": [...]
      },
      "design": {
        "layout": "masonry-grid",
        "columns": 3,
        "gap": "2rem"
      }
    },
    {
      "id": "about",
      "sourceRoute": "/about",
      "sectionType": "team-intro",
      "orderIndex": 3,
      "content": {
        "teamMembers": [...],
        "companyHistory": "..."
      },
      "design": {
        "layout": "two-column",
        "imagePosition": "left"
      }
    }
  ],
  "navigation": {
    "type": "smooth-scroll-anchor",
    "items": [
      {"label": "Home", "href": "#hero"},
      {"label": "Works", "href": "#works"},
      {"label": "About", "href": "#about"},
      {"label": "Contact", "href": "#contact"}
    ],
    "sticky": true
  }
}
```

**âš ï¸ IMPORTANT: DO NOT create multiple HTML files (about.html, works.html, etc.). All sections go into ONE `index.html` as a single-page scroll experience.**

### 9.2.4 Progressive Scroll Capture Strategy

**Purpose:** Capture scroll-based animations and progressive UI changes (parallax, fade-in, sticky headers, etc.)

**âš ï¸ MANDATORY: You MUST scroll through the ENTIRE page, not just the first screen.**


**Methodology:**
```json
{
  "scrollExplorationStrategy": {
    "method": "incremental",
    "scrollStep": "5%",
    "scrollIncrement": "0.05 * totalScrollableHeight",
    "maxScrollDepth": "full-page-height",
    "totalCheckpoints": 21,
    "captureConditions": [
      "EVERY 5% scroll position (mandatory)",
      "when new element enters viewport (IntersectionObserver)",
      "when animation state changes (CSS class, transform, opacity)",
      "at ALL scroll milestones (0%, 5%, 10%, 15%, ..., 95%, 100%)",
      "when sticky/fixed elements change state",
      "BEFORE moving to next position (analysis must complete first)"
    ],
    "detectionTargets": {
      "animationClasses": [
        "fade-in", "fade-up", "slide-in", "zoom-in",
        "parallax", "reveal", "stagger", "scroll-triggered",
        "animate-on-scroll", "aos-animate", "in-view"
      ],
      "cssProperties": [
        "transform", "opacity", "translateY", "translateX", "scale",
        "clip-path", "filter", "backdrop-filter", "background-position"
      ],
      "behaviorPatterns": [
        "sticky header (transparent â†’ solid)",
        "progress bars (width 0% â†’ X%)",
        "number counters (animating digits)",
        "scroll-snap sections",
        "horizontal scroll galleries",
        "parallax backgrounds (moving at different speeds)",
        "lazy-loaded images (placeholder â†’ actual image)"
      ]
    }
  }
}
```

**Execution Steps:**

1. **Initial State Capture**: Screenshot at scroll position 0% (top of page)
   - Capture full viewport
   - Analyze initial state
   - Store as baseline for comparisons

2. **Progressive Scroll**: Use ArrowDown keypress for controlled 5% scrolling
   ```javascript
   // âœ… RECOMMENDED METHOD - Smaller increments
   await mcp_kapture_keypress({ tabId, key: "ArrowDown" }); // ~40px per press
   
   // âœ… ACCEPTABLE METHOD - Larger jumps
   
   // âŒ AVOID - Skips everything
   await mcp_kapture_keypress({ tabId, key: "End" }); // Jumps to bottom
   ```
   ```
   - Wait 300ms for animations to complete
   - Ensure smooth, controlled scrolling

3. **State Detection & Analysis**: Check for changes at EVERY position
   - New elements entering viewport (via bounding rect)
   - CSS class changes on existing elements
   - Transform/opacity value changes
   - Sticky element position changes
   - Background position shifts (parallax)
   - DOM mutations (lazy loading)

4. **Screenshot Capture**: Take screenshot if ANY change detected OR at milestone
   - Screenshot at every 5% position (21 total)
   - Additional screenshots for animation mid-states
   - Store in conversation memory (NOT files)

5. **Immediate Analysis**: Analyze screenshot before moving
   - Visual changes (colors, layouts, spacing)
   - Animation triggers and effects
   - Element visibility changes
   - Comparison with previous position
   - Interaction testing on visible elements

6. **Comparison Logging**: Document changes explicitly
   ```json
   {
     "position": "25%",
     "changes": [
       {
         "element": ".hero-bg",
         "type": "parallax",
         "detail": "translateY(0px) â†’ translateY(-50px)"
       },
       {
         "element": ".feature-card",
         "type": "fade-in",
         "detail": "opacity: 0 â†’ 1, transform: translateY(40px) â†’ translateY(0)"
       }
     ]
   }
   ```

7. **Repeat**: Continue until 100% (bottom of page)
   - Must reach actual page bottom
   - Verify footer is visible
   - Complete all 21 checkpoints

**Milestone Positions (ALL mandatory):**
```
0%, 5%, 10%, 15%, 20%, 25%, 30%, 35%, 40%, 45%, 50%,
55%, 60%, 65%, 70%, 75%, 80%, 85%, 90%, 95%, 100%
```

**Screenshot Naming for Scroll Events:**
```
YYYYMMDD_HHMMSS_step-<nn>_route-<path>_scroll-<percentage>-<state>.png

Examples:
20251110_143012_step-03_route-/_scroll-05-initial-view.png
20251110_143015_step-04_route-/_scroll-10-fade-in-triggered.png
20251110_143018_step-05_route-/_scroll-15-parallax-shift.png
20251110_143021_step-06_route-/_scroll-20-header-solid.png
```

**Logging Format:**
```json
{
  "step": 3,
  "action": "scroll",
  "scrollPosition": {
    "pixels": 800,
    "percentage": 15,
    "checkpointNumber": "3/21"
  },
  "detectedChanges": [
    {
      "element": ".hero-section",
      "changeType": "css-class-added",
      "detail": "fade-in-up animation triggered",
      "timing": "300ms ease-out"
    },
    {
      "element": "header",
      "changeType": "style-change",
      "detail": "background: transparent â†’ rgba(255,255,255,0.95)",
      "trigger": "scroll > 10%"
    },
    {
      "element": ".parallax-bg",
      "changeType": "transform",
      "detail": "translateY(0px) â†’ translateY(-30px)",
      "speed": "0.5x scroll speed"
    }
  ],
  "analysisCompleted": true,
  "interactionsTested": ["button.cta-primary", "a.nav-link"],
  "nextAction": "scroll to 20%"
}
```

**Special Scroll Patterns:**

- **Standard Sections**: 5% increment mandatory
  - Capture every position: 0% â†’ 5% â†’ 10% â†’ ... â†’ 100%
  - No skipping allowed
  - Each position fully analyzed before moving

- **Parallax Sections**: Maintain 5% increment
  - Multiple background layers may move at different speeds
  - Track each layer's position change
  - Document relative speed ratios (e.g., "0.5x", "0.8x")

- **Scroll-Snap Pages**: Capture each snap point + intermediate positions
  - Snap points are natural milestones
  - Also capture scroll between snap points
  - Document snap behavior and timing

- **Infinite Scroll**: Capture first 3 load events with full 5% analysis
  - 5% analysis for initial content
  - Trigger load event 1, continue 5% analysis
  - Trigger load event 2, continue 5% analysis
  - Trigger load event 3, then summarize pattern
  - Document load trigger points and content structure

- **Horizontal Scroll**: Apply same 5% strategy on X-axis
  - 5% of scrollWidth per increment
  - Same analysis depth required
  - Track horizontal parallax and animations

- **Animation Sequences**: Capture each state transition
  - If animation has 4 keyframes, capture all 4
  - Document timing between states
  - Note easing functions

- **Sticky Elements**: Capture before/after state changes
  - Transparent â†’ solid background
  - Hidden â†’ visible
  - Position changes (relative â†’ fixed)
  - Size/scale adjustments

**âš ï¸ SCROLL METHOD (Keypress Only):**
```javascript
// âœ… RECOMMENDED - Controlled scrolling
await mcp_kapture_keypress({ tabId, key: "ArrowDown" });  // ~40px increments

// âœ… ACCEPTABLE - Faster coverage

// âŒ AVOID - Skips everything
await mcp_kapture_keypress({ tabId, key: "End" });        // Jumps to bottom
```

**Note:** `mcp_kapture_evaluate()` does NOT exist in Kapture MCP. Use ArrowDown calibration method.

### 9.3 Screenshot Protocol

- **Timing:** Capture **immediately after each interaction** (upon detecting a DOM, route, or style change).
- **Naming Convention:** 
  - **Interactions**: `YYYYMMDD_HHMMSS_step-<nn>_route-<path>_<action>.png`
  - **Scroll Events**: `YYYYMMDD_HHMMSS_step-<nn>_route-<path>_scroll-<percentage>-<state>.png`
- **Storage:** **Conversation memory** (NOT files) - immediately analyze base64 data
- **Metadata Logging:** For each event, log the `step`, `action`, `selector/target`, `result`, and analysis in **`IntegrationPrompt.json > integration.exploration.events`**.

**âš ï¸ CRITICAL: Screenshots are NOT saved to files**
- Use `mcp_kapture_screenshot()` to get base64 image
- Analyze immediately in conversation context
- Reference previous screenshots: "Compare with screenshot from step 5"
- Conversation history preserves recent images

**Capture Frequency Guidelines:**
- **Scroll Progression**: EVERY 5% position (21 total per page)
  - 0%, 5%, 10%, 15%, 20%, 25%, 30%, 35%, 40%, 45%, 50%
  - 55%, 60%, 65%, 70%, 75%, 80%, 85%, 90%, 95%, 100%
- **Click/Navigation**: 1 screenshot per action
- **Modal/Drawer**: 2 screenshots (opening + open state)
- **Form Validation**: 3 screenshots (initial, error, success)
- **Scroll Animations**: At EVERY 5% OR when animation triggers
- **Parallax Effects**: At EVERY 5% to track movement
- **Scroll-Snap**: At each 5% position + snap points
- **Route Exploration**: Minimum 21+ screenshots per route (full scroll)
- **Animation Sequences**: Capture all intermediate states

**Analysis Before Moving On:**
Each screenshot MUST be analyzed before next action:
1. âœ… Visual analysis (colors, layout, spacing)
2. âœ… Animation detection and timing
3. âœ… Comparison with previous position
4. âœ… Interaction testing on visible elements
5. âœ… Log all findings
6. â¡ï¸ Only then proceed to next scroll position

### 9.4 Performance & Quality Logs (Optional)

- **Performance:** Estimated values like TTI, LCP, FID can be recorded.
- **Issues:** Categorize issues by type: `accessibility`, `seo`, `ux`.

### 9.5 Artifacts

- **`IntegrationPrompt.json`**: The final integrated JSON (specification + evidence logs).
- **/captures/**: Directory where all screenshots are saved.
- **`route-map.json`**: Explored route tree (optional).

---

## Summary

The pipeline **strictly** follows the order below:
**Collect â†’ Validate â†’ Analyze-Request (Detailed) â†’ Visual Analysis â†’ Layout Analysis â†’ MCP Explore (Measure & Capture) â†’ Detailed Composition â†’ Deliver (`IntegrationPrompt.json`)**

- `requestAnalysis` must be written with an **exemplary level of granularity**.
- Live page exploration must use **`mcp_servers.browsermcp`**, and **every screenshot** and **interaction result** must be logged in **`IntegrationPrompt.json`**.
